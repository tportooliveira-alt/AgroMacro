<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgroMacro</title>
    <link rel="stylesheet" href="styles.css?v=20260211q">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0F1318">
</head>

<body>

    <!-- Header -->
    <header class="app-header">
        <div class="logo-container">
            <svg class="logo-svg" width="32" height="32" viewBox="0 0 100 100">
                <path
                    d="M15 75 Q15 45 35 35 Q45 30 55 35 Q65 40 68 50 L85 45 Q88 42 90 45 L88 50 Q85 52 82 50 L70 54 Q72 62 68 70 L72 85 L65 85 L62 72 Q55 78 45 78 Q38 78 32 72 L30 85 L23 85 L27 70 Q22 62 22 55"
                    fill="#D4A843" />
                <circle cx="40" cy="42" r="3" fill="#0F1318" />
            </svg>
            <h1>AgroMacro</h1>
        </div>
        <button id="menu-btn" class="icon-btn" onclick="window.app.navigate('config')">‚öôÔ∏è</button>
    </header>

    <main id="app-container">

        <!-- ===================== HOME ===================== -->
        <section id="view-home" class="view active">

            <!-- Hero Greeting -->
            <div class="hero-greeting">
                <div class="greeting-text" id="greeting-text">ü§† Boa tarde</div>
                <div class="greeting-sub" id="greeting-date"></div>
            </div>

            <!-- KPI Dashboard ‚Äî Operational only, no financial values -->
            <div class="kpi-section">
                <div class="kpi-title">Painel da Fazenda</div>
                <div class="kpi-grid" id="kpi-grid"></div>
            </div>

            <!-- 4 Main Actions ‚Äî Field worker tools -->
            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('lotes')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F97316, #EA580C);">üêÑ</div>
                    <span class="home-card-title">Lotes</span>
                    <span class="home-card-sub">Gest√£o do rebanho</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('manejo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8);">üíâ</div>
                    <span class="home-card-title">Manejo</span>
                    <span class="home-card-sub">Vacinas e pesagem</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('estoque')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">üì¶</div>
                    <span class="home-card-title">Estoque</span>
                    <span class="home-card-sub">Insumos e sal</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('pastos')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #22C55E, #16A34A);">üåø</div>
                    <span class="home-card-title">Pastos</span>
                    <span class="home-card-sub">Piquetes e rota√ß√£o</span>
                </button>
            </div>

            <!-- Alerts Section -->
            <div class="alerts-section">
                <div class="alerts-title">‚ö†Ô∏è Alertas</div>
                <div id="alerts-list"></div>
            </div>

        </section>

        <!-- ===================== FINANCEIRO HUB ===================== -->
        <section id="view-financeiro" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üí≤ Financeiro</h2>
            </div>

            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('compra')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #14B8A6, #0D9488);">üêÇ</div>
                    <span class="home-card-title">Compra de Gado</span>
                    <span class="home-card-sub">Registrar entrada</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('venda')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #10B981, #059669);">üí∞</div>
                    <span class="home-card-title">Venda de Gado</span>
                    <span class="home-card-sub">Registrar sa√≠da</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('fluxo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">üìä</div>
                    <span class="home-card-title">Fluxo de Caixa</span>
                    <span class="home-card-sub">Entradas e sa√≠das</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('balanco')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #6366F1, #4F46E5);">üìã</div>
                    <span class="home-card-title">Balan√ßo / DRE</span>
                    <span class="home-card-sub">Resultado operacional</span>
                </button>
            </div>

            <!-- Quick links -->
            <div class="tertiary-actions" style="margin-top: 8px;">
                <button class="action-btn" onclick="window.app.navigate('obras')">üî® Obras</button>
                <button class="action-btn" onclick="window.app.navigate('funcionarios')">üë∑ Funcion√°rios</button>
            </div>
        </section>

        <!-- ===================== COMPRA DE GADO ===================== -->
        <section id="view-compra" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Compra de Gado</h2>
            </div>
            <form id="form-compra" class="card-form">
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="compra-qty" placeholder="30" required>
                </div>
                <div class="form-group">
                    <label>Peso M√©dio (kg)</label>
                    <input type="number" id="compra-peso" step="0.1" placeholder="220">
                </div>
                <div class="form-group">
                    <label>Valor Total Pago (R$)</label>
                    <input type="number" id="compra-valor" step="0.01" placeholder="120000.00" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" id="compra-desc" placeholder="Ex: 30 Bezerros Nelore">
                </div>
                <div class="form-group">
                    <label>Fornecedor</label>
                    <input type="text" id="compra-fornecedor" placeholder="Ex: Fazenda S√£o Jo√£o">
                </div>
                <div class="form-group">
                    <label>Lote de Destino</label>
                    <select id="compra-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="compra-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Compra</button>
            </form>
        </section>

        <!-- ===================== VENDA DE GADO ===================== -->
        <section id="view-venda" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Venda de Gado</h2>
            </div>
            <form id="form-venda" class="card-form">
                <div class="form-group">
                    <label>Lote</label>
                    <select id="venda-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="venda-qty" placeholder="5" required>
                </div>
                <div class="form-group">
                    <label>Peso M√©dio (kg)</label>
                    <input type="number" id="venda-peso" step="0.1" placeholder="480">
                </div>
                <div class="form-group">
                    <label>Valor Total (R$)</label>
                    <input type="number" id="venda-valor" step="0.01" placeholder="25000.00" required>
                </div>
                <div class="form-group">
                    <label>Comprador</label>
                    <input type="text" id="venda-comprador" placeholder="Ex: Frigor√≠fico XYZ">
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" id="venda-desc" placeholder="Ex: Venda 5 Bois Gordos">
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="venda-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Venda</button>
            </form>
        </section>

        <!-- ===================== REBANHO ===================== -->
        <section id="view-rebanho" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üêÑ Cadastro de Rebanho</h2>
            </div>
            <!-- Tabs -->
            <div class="tab-bar">
                <button class="tab-btn active" onclick="window.rebanho.switchTab('individual', this)">üêÆ
                    Individual</button>
                <button class="tab-btn" onclick="window.rebanho.switchTab('lote', this)">üìã Por Lote</button>
            </div>

            <!-- Tab: Individual -->
            <form id="form-rebanho" class="card-form tab-content active" data-tab="individual">
                <div class="form-row">
                    <div class="form-group">
                        <label>Brinco / ID</label>
                        <input type="text" id="reb-brinco" placeholder="Ex: B-001" required>
                    </div>
                    <div class="form-group">
                        <label>Ra√ßa</label>
                        <select id="reb-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="Tabapu√£">Tabapu√£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="Mesti√ßo">Mesti√ßo</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo</label>
                        <select id="reb-sexo">
                            <option value="macho">‚ôÇ Macho</option>
                            <option value="femea">‚ôÄ F√™mea</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Peso Atual (kg)</label>
                        <input type="number" id="reb-peso" step="0.1" placeholder="220">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data Nascimento</label>
                        <input type="date" id="reb-nascimento">
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">Doa√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote</label>
                    <select id="reb-lote">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="reb-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">üìã Cadastrar Animal</button>
            </form>

            <!-- Tab: Por Lote (cadastro em grupo) -->
            <form id="form-rebanho-lote" class="card-form tab-content" data-tab="lote" style="display:none;">
                <div class="form-group">
                    <label>Nome / Identifica√ß√£o do Lote</label>
                    <input type="text" id="reb-lote-nome" placeholder="Ex: Lote Compra Jan/2026" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Animais</label>
                        <input type="number" id="reb-lote-qtd" placeholder="30" required>
                    </div>
                    <div class="form-group">
                        <label>Ra√ßa Predominante</label>
                        <select id="reb-lote-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="Tabapu√£">Tabapu√£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="Mesti√ßo">Mesti√ßo</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso M√©dio (kg)</label>
                        <input type="number" id="reb-lote-peso" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Idade M√©dia (meses)</label>
                        <input type="number" id="reb-lote-idade" placeholder="18">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo Predominante</label>
                        <select id="reb-lote-sexo">
                            <option value="macho">‚ôÇ Machos</option>
                            <option value="femea">‚ôÄ F√™meas</option>
                            <option value="misto">‚ö§ Misto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-lote-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">Doa√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote Destino</label>
                    <select id="reb-lote-destino">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="reb-lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">üìã Cadastrar Lote de Animais</button>
            </form>

            <div class="section-title" style="margin-top:24px;">Rebanho Atual</div>
            <div id="rebanho-list"></div>
        </section>

        <!-- ===================== LOTES ===================== -->
        <section id="view-lotes" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üìã Gest√£o de Lotes</h2>
            </div>
            <form id="form-lote" class="card-form">
                <div class="form-group">
                    <label>Nome do Lote</label>
                    <input type="text" id="lote-nome" placeholder="Ex: Lote S√£o Jo√£o" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="lote-categoria">
                            <option value="cria">üêÆ Cria</option>
                            <option value="recria">üêÇ Recria</option>
                            <option value="engorda">ü•© Engorda</option>
                            <option value="matrizes">üêÑ Matrizes</option>
                            <option value="touros">üêÉ Touros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Qtd Animais</label>
                        <input type="number" id="lote-qtd" placeholder="30" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ra√ßa Predominante</label>
                    <select id="lote-raca">
                        <option value="">Selecionar...</option>
                        <option value="Nelore">Nelore</option>
                        <option value="Angus">Angus</option>
                        <option value="Nelore x Angus">Nelore x Angus</option>
                        <option value="Brahman">Brahman</option>
                        <option value="Gir">Gir</option>
                        <option value="Girolando">Girolando</option>
                        <option value="Tabapu√£">Tabapu√£</option>
                        <option value="Senepol">Senepol</option>
                        <option value="Nelore PO">Nelore PO</option>
                        <option value="Mesti√ßo">Mesti√ßo</option>
                        <option value="Outra">Outra</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso M√©dio (kg)</label>
                        <input type="number" id="lote-peso-medio" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Pasto Atual</label>
                        <select id="lote-pasto">
                            <option value="">Selecionar...</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Data de Entrada</label>
                    <input type="date" id="lote-data-entrada">
                </div>
                <div class="section-title" style="margin-top:12px;">üßÇ Nutri√ß√£o do Lote</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sal Mineral</label>
                        <select id="lote-sal">
                            <option value="">Nenhum</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo Sal (g/cab/dia)</label>
                        <input type="number" id="lote-sal-consumo" step="0.1" placeholder="80">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ra√ß√£o</label>
                        <select id="lote-racao">
                            <option value="">Nenhuma</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo Ra√ß√£o (kg/cab/dia)</label>
                        <input type="number" id="lote-racao-consumo" step="0.1" placeholder="2.5">
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">üìã Cadastrar Lote</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Lotes Ativos</div>
            <div id="lotes-list"></div>
        </section>

        <!-- ===================== PASTOS ===================== -->
        <section id="view-pastos" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üåæ Cadastro de Pastos</h2>
            </div>
            <form id="form-pasto" class="card-form">
                <div class="form-group">
                    <label>Nome do Pasto / Piquete</label>
                    <input type="text" id="pasto-nome" placeholder="Ex: Piquete Norte" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>√Årea (hectares)</label>
                        <input type="number" id="pasto-area" step="0.1" placeholder="15.0">
                    </div>
                    <div class="form-group">
                        <label>Capacidade (cabe√ßas)</label>
                        <input type="number" id="pasto-capacidade" placeholder="50">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo de Capim</label>
                        <select id="pasto-tipo">
                            <option value="Braqui√°ria">Braqui√°ria</option>
                            <option value="Momba√ßa">Momba√ßa</option>
                            <option value="Tifton">Tifton</option>
                            <option value="Marandu">Marandu</option>
                            <option value="Tanz√¢nia">Tanz√¢nia</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="pasto-status">
                            <option value="disponivel">üü¢ Dispon√≠vel</option>
                            <option value="ocupado">üî¥ Ocupado</option>
                            <option value="descanso">üü° Em Descanso</option>
                            <option value="manutencao">üîß Manuten√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="pasto-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">üåæ Cadastrar Pasto</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Pastos Cadastrados</div>
            <div id="pastos-list"></div>
        </section>

        <!-- ===================== ESTOQUE ===================== -->
        <section id="view-estoque" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üì¶ Estoque de Insumos</h2>
            </div>
            <!-- Quick add form -->
            <form id="form-estoque" class="card-form" style="margin-bottom:16px;">
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="est-categoria" onchange="window.estoque.onCategoryChange()">
                        <option value="racao_sal">üßÇ Ra√ß√£o / Sal Mineral</option>
                        <option value="remedios">üíä Rem√©dios / Vacinas</option>
                        <option value="obras">üî® Obras / Ferramentas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Produto</label>
                    <select id="est-produto-sugestao" onchange="window.estoque.onSuggestionSelect()">
                        <option value="">‚Äî Selecionar ou digitar abaixo ‚Äî</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Nome do Produto</label>
                    <input type="text" id="est-produto" placeholder="Ex: Sal Mineral Fosbovi" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Qtd de Sacos</label>
                        <input type="number" id="est-qty" placeholder="10" required
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Peso por Saco (kg)</label>
                        <input type="number" id="est-peso-saco" step="0.1" placeholder="25" value="25"
                            oninput="window.estoque.calcTotal()">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor por Saco (R$)</label>
                        <input type="number" id="est-valor" step="0.01" placeholder="85.00"
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <input type="text" id="est-unit" placeholder="sacos" value="sacos">
                    </div>
                </div>
                <div id="est-total-preview" class="calc-preview" style="display:none;">
                </div>
                <button type="submit" class="submit-btn">üì• Registrar Entrada</button>
            </form>
            <!-- Filter -->
            <div class="filter-bar" style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
                <button type="button" class="filter-btn active" onclick="window.estoque.filterBy('todos')">üì¶
                    Todos</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('racao_sal')">üßÇ
                    Ra√ß√£o/Sal</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('remedios')">üíä
                    Rem√©dios</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('obras')">üî® Obras</button>
            </div>
            <div id="estoque-list"></div>
        </section>

        <!-- ===================== FLUXO DE CAIXA ===================== -->
        <section id="view-fluxo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üí∞ Fluxo de Caixa</h2>
            </div>
            <div id="fluxo-content"></div>
        </section>

        <!-- ===================== MANEJO ===================== -->
        <section id="view-manejo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üíâ Manejo</h2>
            </div>
            <form id="form-manejo" class="card-form">
                <div class="form-group">
                    <label>Tipo de Manejo</label>
                    <select id="manejo-tipo">
                        <option value="vacinacao">ü©∫ Vacina√ß√£o / Sanit√°rio</option>
                        <option value="pesagem">‚öñÔ∏è Pesagem</option>
                        <option value="movimentacao">üîÑ Movimenta√ß√£o de Pasto</option>
                        <option value="mortalidade">‚ö†Ô∏è Mortalidade</option>
                        <option value="outro">üìù Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Lote</label>
                    <select id="manejo-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Produto / Descri√ß√£o</label>
                    <select id="manejo-produto"
                        onchange="if(this.value==='__outro__'){document.getElementById('manejo-desc-custom').style.display='block'}else{document.getElementById('manejo-desc-custom').style.display='none'}">
                        <option value="">Selecionar do Estoque...</option>
                    </select>
                    <input type="text" id="manejo-desc-custom" placeholder="Descreva o manejo..."
                        style="display:none; margin-top:8px;">
                    <input type="hidden" id="manejo-desc" value="">
                </div>
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="manejo-qtd" placeholder="0">
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="manejo-data" required>
                </div>
                <div class="section-title">Materiais Utilizados (do Estoque)</div>
                <div id="manejo-materials-list" class="materials-list"></div>
                <div class="form-group">
                    <label>Custo Estimado (R$)</label>
                    <input type="number" id="manejo-custo" step="0.01" placeholder="0,00">
                </div>
                <button type="submit" class="submit-btn">‚úÖ Registrar Manejo</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Hist√≥rico de Manejos</div>
            <div id="manejo-history"></div>
        </section>

        <!-- ===================== OBRAS ===================== -->
        <section id="view-obras" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üî® Registrar Obra</h2>
            </div>
            <form id="form-obra" class="card-form">
                <div class="form-group">
                    <label>Nome da Obra</label>
                    <input type="text" id="obra-nome" placeholder="Ex: Cercamento Curral 2" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data de In√≠cio</label>
                        <input type="date" id="obra-inicio" required>
                    </div>
                    <div class="form-group">
                        <label>Data de T√©rmino</label>
                        <input type="date" id="obra-fim">
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <textarea id="obra-obs" rows="2"></textarea>
                </div>
                <div class="section-title">Funcion√°rios na Obra</div>
                <div id="workers-list" class="workers-grid"></div>
                <button type="button" class="add-btn" onclick="window.obras.addWorker()">+ Adicionar
                    Funcion√°rio</button>
                <div class="section-title">Materiais Utilizados (do Estoque)</div>
                <div id="obra-materials-list" class="materials-list"></div>
                <button type="submit" class="submit-btn">‚úÖ Registrar Obra</button>
            </form>
        </section>

        <!-- ===================== FUNCION√ÅRIOS ===================== -->
        <section id="view-funcionarios" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üë∑ Funcion√°rios</h2>
            </div>
            <form id="form-funcionario" class="card-form">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="func-nome" placeholder="Ex: Jo√£o da Silva" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fun√ß√£o</label>
                        <select id="func-funcao">
                            <option value="Pe√£o">ü§† Pe√£o</option>
                            <option value="Tratorista">üöú Tratorista</option>
                            <option value="Cercador">üîß Cercador</option>
                            <option value="Vaqueiro">üêÑ Vaqueiro</option>
                            <option value="Capataz">üëî Capataz</option>
                            <option value="Servicos Gerais">üßπ Servi√ßos Gerais</option>
                            <option value="Diarista">üìã Diarista</option>
                            <option value="Outro">üìù Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Di√°ria (R$)</label>
                        <input type="number" id="func-diaria" step="0.01" placeholder="150.00">
                    </div>
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="func-telefone" placeholder="(xx) xxxxx-xxxx">
                </div>
                <button type="submit" class="submit-btn">‚úÖ Cadastrar Funcion√°rio</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Funcion√°rios Cadastrados</div>
            <div id="funcionarios-list"></div>
        </section>

        <!-- ===================== BALAN√áO / DRE ===================== -->
        <section id="view-balanco" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>üìä Balan√ßo & DRE</h2>
            </div>
            <div id="balanco-content"></div>
        </section>

        <!-- ===================== CONFIGURA√á√ïES ===================== -->
        <section id="view-config" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>‚öôÔ∏è Configura√ß√µes</h2>
            </div>
            <div class="card-form">
                <div class="section-title">Dados</div>
                <button type="button" class="submit-btn danger-btn" onclick="window.app.resetData()">üóëÔ∏è Zerar Todos os
                    Dados</button>
                <p class="info-note" style="margin-top:15px;">‚ö†Ô∏è Esta a√ß√£o apaga todos os registros. N√£o pode ser
                    desfeita.</p>
            </div>
        </section>

    </main>

    <!-- ===================== MODAL: TROCAR PASTO ===================== -->
    <div id="modal-trocar-pasto" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>üîÑ Trocar Pasto</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-trocar-pasto')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-tp-lote"></span></p>
                <p><strong>Pasto Atual:</strong> <span id="modal-tp-atual"></span></p>
                <div class="form-group">
                    <label>Novo Pasto</label>
                    <select id="modal-tp-novo-pasto">
                        <option value="">Selecionar...</option>
                    </select>
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarTrocaPasto()">‚úÖ Confirmar Troca</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: JUNTAR LOTES ===================== -->
    <div id="modal-juntar-lotes" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>üîó Juntar Lotes</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-juntar-lotes')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p style="font-size:13px; color:#666; margin-bottom:12px;">Selecione 2 ou mais lotes para unir. Os
                    animais ser√£o somados e o peso ser√° a m√©dia ponderada.</p>
                <div id="modal-jl-lista" class="checkbox-list"></div>
                <div class="form-group" style="margin-top:12px;">
                    <label>Nome do Novo Lote</label>
                    <input type="text" id="modal-jl-novo-nome" placeholder="Ex: Lote Unificado 2026">
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarJuntarLotes()">‚úÖ Juntar Lotes</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: ABASTECER COCHO ===================== -->
    <div id="modal-abastecer" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>üßÇ Abastecer Cocho</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-abastecer')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-ab-lote"></span></p>
                <p><strong>Produto:</strong> <span id="modal-ab-tipo"></span></p>
                <input type="hidden" id="modal-ab-produto" value="">
                <p id="modal-ab-consumo-info" style="font-size:12px; color:#666; margin-bottom:10px;"></p>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Sacos</label>
                        <input type="number" id="modal-ab-sacos" placeholder="4"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                    <div class="form-group">
                        <label>Kg por Saco</label>
                        <input type="number" id="modal-ab-kg-saco" value="25" step="0.5"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                </div>
                <div id="modal-ab-previsao" class="previsao-box"></div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarAbastecimento()">‚úÖ Registrar
                    Abastecimento</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="window.app.navigate('home')" id="nav-home">
            <span class="nav-icon">üè†</span>
            Home
        </button>
        <button class="nav-item" onclick="window.app.navigate('lotes')" id="nav-lotes">
            <span class="nav-icon">üêÑ</span>
            Lotes
        </button>
        <button class="nav-item" onclick="window.app.navigate('manejo')" id="nav-manejo">
            <span class="nav-icon">ü©∫</span>
            Manejo
        </button>
        <button class="nav-item" onclick="window.app.navigate('financeiro')" id="nav-financeiro">
            <span class="nav-icon">üí≤</span>
            Financeiro
        </button>
        <button class="nav-item" onclick="window.app.navigate('config')" id="nav-config">
            <span class="nav-icon">‚öôÔ∏è</span>
            Config
        </button>
    </nav>

    <!-- Scripts -->
    <script src="js/data.js?v=20260211r"></script>
    <script src="js/rebanho.js?v=20260211r"></script>
    <script src="js/pastos.js?v=20260211r"></script>
    <script src="js/lotes.js?v=20260211r"></script>
    <script src="js/obras.js?v=20260211r"></script>
    <script src="js/manejo.js?v=20260211r"></script>
    <script src="js/financeiro.js?v=20260211r"></script>
    <script src="js/estoque.js?v=20260211r"></script>
    <script src="js/funcionarios.js?v=20260211r"></script>
    <script src="app.js?v=20260211r"></script>

    <!-- Theme & Greeting Init -->
    <script>
        (function () {
            var h = new Date().getHours();

            // Auto dark/light mode ‚Äî dark between 18h and 6h
            if (h >= 18 || h < 6) {
                document.body.classList.add('dark-mode');
            }

            // Greeting
            var greetEl = document.getElementById('greeting-text');
            var dateEl = document.getElementById('greeting-date');
            if (greetEl) {
                if (h < 6) greetEl.textContent = 'üåô Boa madrugada';
                else if (h < 12) greetEl.textContent = '‚òÄÔ∏è Bom dia';
                else if (h < 18) greetEl.textContent = 'ü§† Boa tarde';
                else greetEl.textContent = 'üåô Boa noite';
            }
            if (dateEl) {
                var days = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
                var months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
                var now = new Date();
                dateEl.textContent = days[now.getDay()] + ', ' + now.getDate() + ' de ' + months[now.getMonth()] + ' de ' + now.getFullYear();
            }
        })();
    </script>
</body>

</html>