<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgroMacro</title>
    <link rel="stylesheet" href="styles.css?v=20260211q">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
    <!-- Leaflet.js ‚Äî Mapa Interativo (gr√°tis) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <meta name="theme-color" content="#0F1318">
</head>

<body>

    <!-- Header -->
    <header class="app-header">
        <div class="logo-container">
            <svg class="logo-svg" width="32" height="32" viewBox="0 0 100 100">
                <path
                    d="M15 75 Q15 45 35 35 Q45 30 55 35 Q65 40 68 50 L85 45 Q88 42 90 45 L88 50 Q85 52 82 50 L70 54 Q72 62 68 70 L72 85 L65 85 L62 72 Q55 78 45 78 Q38 78 32 72 L30 85 L23 85 L27 70 Q22 62 22 55"
                    fill="#D4A843" />
                <circle cx="40" cy="42" r="3" fill="#0F1318" />
            </svg>
            <h1>AgroMacro</h1>
        </div>
        <button id="menu-btn" class="icon-btn" onclick="window.app.navigate('config')"><span data-icon="config"
                style="width:20px;height:20px;display:inline-flex;"></span></button>
    </header>

    <main id="app-container">

        <!-- ===================== HOME ===================== -->
        <section id="view-home" class="view active">

            <!-- Hero Greeting -->
            <div class="hero-greeting">
                <div class="greeting-text" id="greeting-text">Boa tarde</div>
                <div class="greeting-sub" id="greeting-date"></div>
            </div>

            <!-- HOME CAMPO REMOVIDO ‚Äî Interface unificada -->

            <!-- ‚ïê‚ïê HOME GER√äNCIA (Produtor) ‚Äî Layout completo ‚ïê‚ïê -->
            <div id="home-gerencia" class="gerencia-only">
                <!-- Bot√£o Mapa destaque -->
                <button class="mapa-home-btn" onclick="window.app.navigate('mapa')">
                    <span class="mapa-home-icon">üó∫Ô∏è</span>
                    <div class="mapa-home-text">
                        <span class="mapa-home-title">Mapa da Fazenda</span>
                        <span class="mapa-home-sub">Visualizar pastos no sat√©lite</span>
                    </div>
                    <span class="mapa-home-arrow">‚Üí</span>
                </button>

                <!-- Weather Widget -->
                <div id="clima-widget" class="clima-widget" style="display:none;"></div>

                <!-- KPI Dashboard -->
                <div class="kpi-section">
                    <div class="kpi-title">Painel da Fazenda</div>
                    <div class="kpi-grid" id="kpi-grid"></div>
                </div>

                <!-- Quick Actions ‚Äî Atalhos R√°pidos -->
                <div class="kpi-title" style="margin-top:4px;">A√ß√µes R√°pidas</div>
                <div class="home-grid">

                    <button class="home-card" onclick="window.app.navigate('manejo')">
                        <div class="home-card-icon" data-icon="manejoRapido"
                            style="background: linear-gradient(135deg, #1E3A5F, #1E40AF);">ü©∫</div>
                        <span class="home-card-title">Manejo</span>
                        <span class="home-card-sub">R√°pido</span>
                    </button>
                    <button class="home-card" onclick="window.app.navigate('estoque')">
                        <div class="home-card-icon" data-icon="abastecer"
                            style="background: linear-gradient(135deg, #78350F, #92400E);">üì¶</div>
                        <span class="home-card-title">Abastecer</span>
                        <span class="home-card-sub">Estoque</span>
                    </button>
                </div>

                <!-- IA Insights Panel -->
                <div id="ia-insights-home" style="margin-top:16px;"></div>

                <!-- Cota√ß√£o do Rebanho em P√© -->
                <div id="cotacao-rebanho" style="margin-top:16px;"></div>

                <!-- Dashboard Gr√°ficos -->
                <div id="graficos-home" style="margin-top:16px;"></div>

                <!-- Dashboard de Resultados -->
                <div id="resultados-dashboard" style="margin-top:16px;"></div>

                <!-- Atividade Recente -->
                <div id="atividade-recente" style="margin-top:16px;"></div>
            </div>

            <!-- Alerts Section (ambos perfis) -->
            <div class="alerts-section">
                <div class="alerts-title">Alertas</div>
                <div id="alerts-list"></div>
            </div>

        </section>

        <!-- ===================== FINANCEIRO (HUB) ===================== -->
        <section id="view-financeiro" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Financeiro</h2>
            </div>

            <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px; padding:16px;">
                <!-- Compra de Gado -->
                <button onclick="window.app.navigate('compra')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#166534,#22c55e); display:flex; align-items:center; justify-content:center; font-size:28px;">
                        üõí</div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Compra</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">de Gado</div>
                    </div>
                </button>

                <!-- Venda de Gado -->
                <button onclick="window.app.navigate('venda')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#92400E,#D4A843); display:flex; align-items:center; justify-content:center; font-size:28px;">
                        üí∞</div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Venda</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">de Gado</div>
                    </div>
                </button>

                <!-- Fluxo de Caixa -->
                <button onclick="window.app.navigate('fluxo')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#7C3AED,#4F46E5); display:flex; align-items:center; justify-content:center; font-size:28px;">
                        üìä</div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Fluxo</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">de Caixa</div>
                    </div>
                </button>

                <!-- Contas a Pagar -->
                <button onclick="window.app.navigate('contas')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#B91C1C,#EF4444); display:flex; align-items:center; justify-content:center; font-size:28px;">
                        üìã</div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Contas</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">a Pagar</div>
                    </div>
                </button>

                <!-- Balan√ßo / DRE -->
                <button onclick="window.app.navigate('balanco')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#0369A1,#0EA5E9); display:flex; align-items:center; justify-content:center; font-size:28px;">
                        üìà</div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Balan√ßo</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">DRE</div>
                    </div>
                </button>
            </div>
        </section>

        <!-- ===================== COMPRA DE GADO ===================== -->
        <section id="view-compra" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Compra de Gado</h2>
            </div>
            <form id="form-compra" class="card-form">
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="compra-qty" placeholder="30" required>
                </div>
                <div class="form-group">
                    <label>Peso M√©dio (kg)</label>
                    <input type="number" id="compra-peso" step="0.1" placeholder="220">
                </div>
                <div class="form-group">
                    <label>Valor Total Pago (R$)</label>
                    <input type="number" id="compra-valor" step="0.01" placeholder="120000.00" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" id="compra-desc" placeholder="Ex: 30 Bezerros Nelore">
                </div>
                <div class="form-group">
                    <label>Fornecedor</label>
                    <input type="text" id="compra-fornecedor" placeholder="Ex: Fazenda S√£o Jo√£o">
                </div>
                <div class="form-group">
                    <label>Lote de Destino</label>
                    <select id="compra-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üåø Pasto de Destino</label>
                    <select id="compra-pasto">
                        <option value="">Selecionar Pasto...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="compra-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Compra</button>
            </form>
        </section>

        <!-- ===================== VENDA DE GADO ===================== -->
        <section id="view-venda" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Venda de Gado</h2>
            </div>
            <form id="form-venda" class="card-form">
                <div class="form-group">
                    <label>Lote</label>
                    <select id="venda-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="venda-qty" placeholder="5" required>
                </div>
                <div class="form-group">
                    <label>Peso M√©dio (kg)</label>
                    <input type="number" id="venda-peso" step="0.1" placeholder="480">
                </div>
                <div class="form-group">
                    <label>Valor Total (R$)</label>
                    <input type="number" id="venda-valor" step="0.01" placeholder="25000.00" required>
                </div>
                <div class="form-group">
                    <label>Comprador</label>
                    <input type="text" id="venda-comprador" placeholder="Ex: Frigor√≠fico XYZ">
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" id="venda-desc" placeholder="Ex: Venda 5 Bois Gordos">
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="venda-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Venda</button>
            </form>
        </section>

        <!-- ===================== REBANHO ===================== -->
        <section id="view-rebanho" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Cadastro de Rebanho</h2>
            </div>
            <!-- Tabs -->
            <div class="tab-bar">
                <button class="tab-btn active"
                    onclick="window.rebanho.switchTab('individual', this)">Individual</button>
                <button class="tab-btn" onclick="window.rebanho.switchTab('lote', this)">Por Lote</button>
            </div>

            <!-- Tab: Individual -->
            <form id="form-rebanho" class="card-form tab-content active" data-tab="individual">
                <div class="form-row">
                    <div class="form-group">
                        <label>Brinco / ID</label>
                        <input type="text" id="reb-brinco" placeholder="Ex: B-001" required>
                    </div>
                    <div class="form-group">
                        <label>Ra√ßa</label>
                        <select id="reb-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="Tabapu√£">Tabapu√£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="Mesti√ßo">Mesti√ßo</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo</label>
                        <select id="reb-sexo">
                            <option value="macho">‚ôÇ Macho</option>
                            <option value="femea">‚ôÄ F√™mea</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Peso Atual (kg)</label>
                        <input type="number" id="reb-peso" step="0.1" placeholder="220">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data Nascimento</label>
                        <input type="date" id="reb-nascimento">
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">Doa√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote</label>
                    <select id="reb-lote">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="reb-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">Cadastrar Animal</button>
            </form>

            <!-- Tab: Por Lote (cadastro em grupo) -->
            <form id="form-rebanho-lote" class="card-form tab-content" data-tab="lote" style="display:none;">
                <div class="form-group">
                    <label>Nome / Identifica√ß√£o do Lote</label>
                    <input type="text" id="reb-lote-nome" placeholder="Ex: Lote Compra Jan/2026" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Animais</label>
                        <input type="number" id="reb-lote-qtd" placeholder="30" required>
                    </div>
                    <div class="form-group">
                        <label>Ra√ßa Predominante</label>
                        <select id="reb-lote-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="Tabapu√£">Tabapu√£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="Mesti√ßo">Mesti√ßo</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso M√©dio (kg)</label>
                        <input type="number" id="reb-lote-peso" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Idade M√©dia (meses)</label>
                        <input type="number" id="reb-lote-idade" placeholder="18">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo Predominante</label>
                        <select id="reb-lote-sexo">
                            <option value="macho">‚ôÇ Machos</option>
                            <option value="femea">‚ôÄ F√™meas</option>
                            <option value="misto">‚ö§ Misto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-lote-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">Doa√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote Destino</label>
                    <select id="reb-lote-destino">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="reb-lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">Cadastrar Lote de Animais</button>
            </form>

            <div class="section-title" style="margin-top:24px;">Rebanho Atual</div>
            <div id="rebanho-list"></div>
        </section>

        <!-- ===================== LOTES ===================== -->
        <section id="view-lotes" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Gest√£o de Lotes</h2>
            </div>
            <form id="form-lote" class="card-form">
                <div class="form-group">
                    <label>Nome do Lote</label>
                    <input type="text" id="lote-nome" placeholder="Ex: Lote S√£o Jo√£o" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="lote-categoria">
                            <option value="cria">üêÆ Cria</option>
                            <option value="recria">üêÇ Recria</option>
                            <option value="engorda">ü•© Engorda</option>
                            <option value="matrizes">üêÑ Matrizes</option>
                            <option value="touros">üêÉ Touros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Qtd Animais</label>
                        <input type="number" id="lote-qtd" placeholder="30" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ra√ßa Predominante</label>
                    <select id="lote-raca">
                        <option value="">Selecionar...</option>
                        <option value="Nelore">Nelore</option>
                        <option value="Angus">Angus</option>
                        <option value="Nelore x Angus">Nelore x Angus</option>
                        <option value="Brahman">Brahman</option>
                        <option value="Gir">Gir</option>
                        <option value="Girolando">Girolando</option>
                        <option value="Tabapu√£">Tabapu√£</option>
                        <option value="Senepol">Senepol</option>
                        <option value="Nelore PO">Nelore PO</option>
                        <option value="Mesti√ßo">Mesti√ßo</option>
                        <option value="Outra">Outra</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso M√©dio (kg)</label>
                        <input type="number" id="lote-peso-medio" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Pasto Atual</label>
                        <select id="lote-pasto">
                            <option value="">Selecionar...</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Data de Entrada</label>
                    <input type="date" id="lote-data-entrada">
                </div>
                <div class="section-title" style="margin-top:12px;">Nutri√ß√£o do Lote</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sal Mineral</label>
                        <select id="lote-sal">
                            <option value="">Nenhum</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo Sal (g/cab/dia)</label>
                        <input type="number" id="lote-sal-consumo" step="0.1" placeholder="80">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ra√ß√£o</label>
                        <select id="lote-racao">
                            <option value="">Nenhuma</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo Ra√ß√£o (kg/cab/dia)</label>
                        <input type="number" id="lote-racao-consumo" step="0.1" placeholder="2.5">
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">Cadastrar Lote</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Lotes Ativos</div>
            <div id="lotes-list"></div>
            <div id="indicadores-produtivos" style="margin-top:16px;"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioLotes('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioLotes('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== PASTOS ===================== -->
        <section id="view-pastos" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Cadastro de Pastos</h2>
            </div>
            <form id="form-pasto" class="card-form">
                <div class="form-group">
                    <label>Nome do Pasto / Piquete</label>
                    <input type="text" id="pasto-nome" placeholder="Ex: Piquete Norte" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>√Årea (hectares)</label>
                        <input type="number" id="pasto-area" step="0.1" placeholder="15.0">
                    </div>
                    <div class="form-group">
                        <label>Capacidade (cabe√ßas)</label>
                        <input type="number" id="pasto-capacidade" placeholder="50">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo de Capim</label>
                        <select id="pasto-tipo">
                            <option value="Braqui√°ria">Braqui√°ria</option>
                            <option value="Momba√ßa">Momba√ßa</option>
                            <option value="Tifton">Tifton</option>
                            <option value="Marandu">Marandu</option>
                            <option value="Tanz√¢nia">Tanz√¢nia</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="pasto-status">
                            <option value="disponivel">üü¢ Dispon√≠vel</option>
                            <option value="ocupado">üî¥ Ocupado</option>
                            <option value="descanso">üü° Em Descanso</option>
                            <option value="manutencao">üîß Manuten√ß√£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="pasto-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">Cadastrar Pasto</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Pastos Cadastrados</div>
            <div id="pastos-list"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioPastos('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioPastos('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== ESTOQUE ===================== -->
        <section id="view-estoque" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Estoque de Insumos</h2>
            </div>
            <!-- Quick add form -->
            <form id="form-estoque" class="card-form" style="margin-bottom:16px;">
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="est-categoria" onchange="window.estoque.onCategoryChange()">
                        <option value="racao_sal">üßÇ Ra√ß√£o / Sal Mineral</option>
                        <option value="remedios">üíä Rem√©dios / Vacinas</option>
                        <option value="obras">üî® Obras / Ferramentas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Produto</label>
                    <select id="est-produto-sugestao" onchange="window.estoque.onSuggestionSelect()">
                        <option value="">‚Äî Selecionar ou digitar abaixo ‚Äî</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Nome do Produto</label>
                    <input type="text" id="est-produto" placeholder="Ex: Sal Mineral Fosbovi" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Qtd de Sacos</label>
                        <input type="number" id="est-qty" placeholder="10" required
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Peso por Saco (kg)</label>
                        <input type="number" id="est-peso-saco" step="0.1" placeholder="25" value="25"
                            oninput="window.estoque.calcTotal()">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor por Saco (R$)</label>
                        <input type="number" id="est-valor" step="0.01" placeholder="85.00"
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <input type="text" id="est-unit" placeholder="sacos" value="sacos">
                    </div>
                </div>
                <div id="est-total-preview" class="calc-preview" style="display:none;">
                </div>
                <button type="submit" class="submit-btn">Registrar Entrada</button>
            </form>
            <!-- Filter -->
            <div class="filter-bar" style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
                <button type="button" class="filter-btn active"
                    onclick="window.estoque.filterBy('todos')">Todos</button>
                <button type="button" class="filter-btn"
                    onclick="window.estoque.filterBy('racao_sal')">Ra√ß√£o/Sal</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('remedios')">Rem√©dios</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('obras')">Obras</button>
            </div>
            <div id="estoque-list"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioEstoque('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioEstoque('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== FLUXO DE CAIXA ===================== -->
        <section id="view-fluxo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Fluxo de Caixa</h2>
            </div>
            <div id="fluxo-content"></div>
            <div id="indicadores-financeiros"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioFluxo('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioFluxo('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== MANEJO ===================== -->
        <section id="view-manejo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Manejo</h2>
            </div>
            <form id="form-manejo" class="card-form">
                <div class="form-group">
                    <label>Tipo de Manejo</label>
                    <select id="manejo-tipo" onchange="window.manejo.onTipoChange()">
                        <option value="nutricao">üßÇ Nutri√ß√£o (Sal / Ra√ß√£o)</option>
                        <option value="vacinacao">ü©∫ Vacina√ß√£o / Sanit√°rio</option>
                        <option value="pesagem">‚öñÔ∏è Pesagem</option>
                        <option value="movimentacao">üîÑ Movimenta√ß√£o de Pasto</option>
                        <option value="mortalidade">‚ö†Ô∏è Mortalidade</option>
                        <option value="outro">üìù Outro</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Pasto</label>
                        <select id="manejo-pasto">
                            <option value="">Selecionar Pasto...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Lote</label>
                        <select id="manejo-lote">
                            <option value="">Selecionar Lote...</option>
                        </select>
                    </div>
                </div>
                <!-- Produto do estoque + quantidade usada -->
                <div class="form-group">
                    <label id="manejo-produto-label">Produto do Estoque</label>
                    <select id="manejo-produto"
                        onchange="if(this.value==='__outro__'){document.getElementById('manejo-desc-custom').style.display='block'}else{document.getElementById('manejo-desc-custom').style.display='none'}">
                        <option value="">Selecionar do Estoque...</option>
                    </select>
                    <input type="text" id="manejo-desc-custom" placeholder="Descreva o manejo..."
                        style="display:none; margin-top:8px;">
                    <input type="hidden" id="manejo-desc" value="">
                </div>
                <div class="form-row">
                    <div class="form-group" id="manejo-qty-produto-group">
                        <label>Quantidade Usada (kg)</label>
                        <input type="number" id="manejo-qty-produto" step="0.1" placeholder="Ex: 25">
                    </div>
                    <div class="form-group">
                        <label>Qtd Animais</label>
                        <input type="number" id="manejo-qtd" placeholder="0">
                    </div>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="manejo-data" required>
                </div>
                <div id="manejo-materials-section">
                    <div class="section-title">Materiais Utilizados (do Estoque)</div>
                    <div id="manejo-materials-list" class="materials-list"></div>
                </div>
                <div class="form-group">
                    <label>Custo Estimado (R$)</label>
                    <input type="number" id="manejo-custo" step="0.01" placeholder="0,00">
                </div>
                <button type="submit" class="submit-btn">Registrar Manejo</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Hist√≥rico de Manejos</div>
            <div id="manejo-history"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioManejo('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioManejo('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== OBRAS ===================== -->
        <section id="view-rastreabilidade" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Rastreabilidade SISBOV</h2>
            </div>
            <div id="rastreabilidade-content">
                <!-- Rendered by JS -->
            </div>
        </section>

        <section id="view-obras" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Registrar Obra</h2>
            </div>
            <form id="form-obra" class="card-form">
                <div class="form-group">
                    <label>Nome da Obra</label>
                    <input type="text" id="obra-nome" placeholder="Ex: Cercamento Curral 2" required>
                </div>
                <div class="form-group">
                    <label>Pasto / Local</label>
                    <select id="obra-pasto">
                        <option value="">Selecionar pasto...</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data de In√≠cio</label>
                        <input type="date" id="obra-inicio" required>
                    </div>
                    <div class="form-group">
                        <label>Data de T√©rmino</label>
                        <input type="date" id="obra-fim">
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <textarea id="obra-obs" rows="2"></textarea>
                </div>
                <div class="section-title">Empreiteiro (Opcional)</div>
                <div class="form-group">
                    <label>Nome do Empreiteiro</label>
                    <input type="text" id="obra-empreiteiro-nome" placeholder="Ex: Jo√£o da Silva / Construtora ABC">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contato</label>
                        <input type="text" id="obra-empreiteiro-contato" placeholder="(77) 99999-0000">
                    </div>
                    <div class="form-group">
                        <label>Valor Contratado (R$)</label>
                        <input type="number" id="obra-empreiteiro-valor" step="0.01" placeholder="5000.00">
                    </div>
                </div>
                <div class="section-title">Funcion√°rios na Obra</div>
                <div id="workers-list" class="workers-grid"></div>
                <button type="button" class="add-btn" onclick="window.obras.addWorker()">+ Adicionar
                    Funcion√°rio</button>
                <div class="section-title">Materiais Utilizados (do Estoque)</div>
                <div id="obra-materials-list" class="materials-list"></div>
                <button type="submit" class="submit-btn">Registrar Obra</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Obras Registradas</div>
            <div id="obras-history"></div>
        </section>

        <!-- ===================== FUNCION√ÅRIOS ===================== -->
        <section id="view-funcionarios" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Funcion√°rios</h2>
            </div>
            <form id="form-funcionario" class="card-form">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="func-nome" placeholder="Ex: Jo√£o da Silva" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fun√ß√£o</label>
                        <select id="func-funcao">
                            <option value="Pe√£o">ü§† Pe√£o</option>
                            <option value="Tratorista">üöú Tratorista</option>
                            <option value="Cercador">üîß Cercador</option>
                            <option value="Vaqueiro">üêÑ Vaqueiro</option>
                            <option value="Capataz">üëî Capataz</option>
                            <option value="Servicos Gerais">üßπ Servi√ßos Gerais</option>
                            <option value="Diarista">üìã Diarista</option>
                            <option value="Outro">üìù Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tipo de Pagamento</label>
                        <select id="func-tipo-pagamento">
                            <option value="mensal">üí∞ Sal√°rio Mensal</option>
                            <option value="diaria">üìã Di√°ria</option>
                            <option value="empreiteiro">üî® Empreiteiro</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" id="func-valor" step="0.01" placeholder="2500.00">
                        <small id="func-valor-hint" style="color:var(--text-light);font-size:11px;">Sal√°rio
                            mensal</small>
                    </div>
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" id="func-telefone" placeholder="(xx) xxxxx-xxxx">
                    </div>
                </div>
                <div class="form-group">
                    <label>CPF / Documento</label>
                    <input type="text" id="func-cpf" placeholder="000.000.000-00">
                </div>
                <button type="submit" class="submit-btn">‚úÖ Cadastrar Funcion√°rio</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Funcion√°rios Cadastrados</div>
            <div id="funcionarios-list"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioFuncionarios('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioFuncionarios('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== BALAN√áO / DRE ===================== -->
        <section id="view-balanco" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Balan√ßo & DRE</h2>
            </div>
            <div id="balanco-content"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.gerarRelatorio('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.gerarRelatorio('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>
        <!-- ===================== OPERA√á√ïES (HUB) ===================== -->
        <section id="view-operacoes" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Opera√ß√µes</h2>
            </div>

            <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px; padding:16px;">
                <!-- Rastreabilidade -->
                <button onclick="window.app.navigate('rastreabilidade')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#2563EB,#1E40AF); display:flex; align-items:center; justify-content:center;">
                        <svg width="28" height="28" fill="white" viewBox="0 0 24 24">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />
                        </svg>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Rastreabilidade</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">SISBOV / GTA</div>
                    </div>
                </button>

                <!-- Modo Pesagem -->
                <button onclick="window.app.navigate('balanca')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#059669,#047857); display:flex; align-items:center; justify-content:center;">
                        <svg width="28" height="28" fill="white" viewBox="0 0 24 24">
                            <path
                                d="M12 3L4 9v12h16V9l-8-6zm0 2.18L18 9.7V19H6V9.7l6-4.52zM12 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                        </svg>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Modo Pesagem</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">Balan√ßa + RFID</div>
                    </div>
                </button>

                <!-- Estoque -->
                <button onclick="window.app.navigate('estoque')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#92400E,#78350F); display:flex; align-items:center; justify-content:center;">
                        <svg width="28" height="28" fill="white" viewBox="0 0 24 24">
                            <path
                                d="M20 2H4c-1 0-2 1-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4h16v3z" />
                        </svg>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Estoque</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">Insumos e ra√ß√£o</div>
                    </div>
                </button>

                <!-- Obras -->
                <button onclick="window.app.navigate('obras')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#374151,#1F2937); display:flex; align-items:center; justify-content:center;">
                        <svg width="28" height="28" fill="white" viewBox="0 0 24 24">
                            <path
                                d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" />
                        </svg>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Obras</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">Constru√ß√µes</div>
                    </div>
                </button>

                <!-- Funcion√°rios -->
                <button onclick="window.app.navigate('funcionarios')"
                    style="background:#fff; border:none; border-radius:16px; padding:24px 12px; display:flex; flex-direction:column; align-items:center; gap:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); cursor:pointer;">
                    <div
                        style="width:56px; height:56px; border-radius:14px; background:linear-gradient(135deg,#0A9B8F,#0D7D74); display:flex; align-items:center; justify-content:center;">
                        <svg width="28" height="28" fill="white" viewBox="0 0 24 24">
                            <path
                                d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                        </svg>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-weight:700; font-size:14px; color:#1a1a2e;">Funcion√°rios</div>
                        <div style="font-size:11px; color:#888; margin-top:2px;">Equipe</div>
                    </div>
                </button>
            </div>
        </section>

        <!-- ===================== CONFIGURA√á√ïES ===================== -->
        <section id="view-config" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Configura√ß√µes</h2>
            </div>

            <!-- Cota√ß√£o da Arroba -->
            <div class="card-form">
                <div class="section-title">üí∞ Cota√ß√£o da Arroba</div>
                <div class="form-group">
                    <label>Pre√ßo da @ (R$)</label>
                    <input type="number" id="config-preco-arroba" step="0.01" placeholder="280.00"
                        onchange="window.app.saveArrobaPrice()">
                    <small style="color:var(--text-light);margin-top:4px;display:block;">Usado nos KPIs de valor do
                        rebanho e proje√ß√µes de receita</small>
                </div>
            </div>

            <div class="card-form" style="margin-top:16px;">
                <div class="section-title">Fazenda</div>
                <div class="form-group">
                    <label>Nome da Fazenda</label>
                    <input type="text" id="config-nome-fazenda" placeholder="Ex: Fazenda S√£o Jo√£o"
                        onchange="window.app.saveConfig()">
                </div>
                <div class="form-group">
                    <label>Propriet√°rio</label>
                    <input type="text" id="config-proprietario" placeholder="Nome completo"
                        onchange="window.app.saveConfig()">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Cidade</label>
                        <input type="text" id="config-cidade" placeholder="Cidade" onchange="window.app.saveConfig()">
                    </div>
                    <div class="form-group">
                        <label>Estado</label>
                        <select id="config-estado" onchange="window.app.saveConfig()">
                            <option value="">Selecione</option>
                            <option value="AC">AC</option>
                            <option value="AL">AL</option>
                            <option value="AM">AM</option>
                            <option value="AP">AP</option>
                            <option value="BA">BA</option>
                            <option value="CE">CE</option>
                            <option value="DF">DF</option>
                            <option value="ES">ES</option>
                            <option value="GO">GO</option>
                            <option value="MA">MA</option>
                            <option value="MG">MG</option>
                            <option value="MS">MS</option>
                            <option value="MT">MT</option>
                            <option value="PA">PA</option>
                            <option value="PB">PB</option>
                            <option value="PE">PE</option>
                            <option value="PI">PI</option>
                            <option value="PR">PR</option>
                            <option value="RJ">RJ</option>
                            <option value="RN">RN</option>
                            <option value="RO">RO</option>
                            <option value="RR">RR</option>
                            <option value="RS">RS</option>
                            <option value="SC">SC</option>
                            <option value="SE">SE</option>
                            <option value="SP">SP</option>
                            <option value="TO">TO</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>√Årea Total (hectares)</label>
                    <input type="number" id="config-area" step="0.1" placeholder="0" onchange="window.app.saveConfig()">
                </div>
            </div>

            <!-- Sync / Login / Fazenda -->
            <div class="card-form" style="margin-top:16px;">
                <div class="section-title">üåê Sincroniza√ß√£o & Fazenda</div>
                <div id="sync-container"></div>
            </div>

            <div class="card-form" style="margin-top:16px;">
                <div class="section-title">ü§ñ IA Consultor ‚Äî Multi-Provedor</div>
                <p style="font-size:11px; color:var(--text-2); margin-bottom:12px;">
                    Configure 1 ou mais IAs gratuitas. O sistema tenta cada uma em cascata at√© obter resposta.
                </p>
                <div id="ia-providers-status" style="margin-bottom:12px;"></div>

                <!-- Gemini -->
                <div class="form-group">
                    <label>üîµ Google Gemini <span style="font-size:10px;color:#059669;">(30 req/min
                            gr√°tis)</span></label>
                    <div style="display:flex; gap:8px;">
                        <input type="password" id="config-api-key" placeholder="Cole sua chave AIza..." style="flex:1;"
                            onchange="window.iaConsultor.salvarTodasChaves()">
                        <button type="button" class="btn-sm" style="white-space:nowrap; background:#2563EB;"
                            onclick="var el=document.getElementById('config-api-key'); el.type = el.type==='password' ? 'text' : 'password';">üëÅÔ∏è</button>
                    </div>
                    <p class="info-note" style="margin-top:4px; font-size:10px;">
                        <a href="https://aistudio.google.com/apikey" target="_blank"
                            style="color:#2563EB;">aistudio.google.com/apikey</a>
                    </p>
                </div>

                <!-- Groq -->
                <div class="form-group">
                    <label>üü† Groq (Llama 3.3) <span style="font-size:10px;color:#059669;">(14.400 req/dia
                            gr√°tis)</span></label>
                    <div style="display:flex; gap:8px;">
                        <input type="password" id="config-groq-key" placeholder="Cole sua chave gsk_..." style="flex:1;"
                            onchange="window.iaConsultor.salvarTodasChaves()">
                        <button type="button" class="btn-sm" style="white-space:nowrap; background:#D97706;"
                            onclick="var el=document.getElementById('config-groq-key'); el.type = el.type==='password' ? 'text' : 'password';">üëÅÔ∏è</button>
                    </div>
                    <p class="info-note" style="margin-top:4px; font-size:10px;">
                        <a href="https://console.groq.com/keys" target="_blank"
                            style="color:#D97706;">console.groq.com/keys</a>
                    </p>
                </div>

                <!-- Cerebras -->
                <div class="form-group">
                    <label>üü£ Cerebras (Llama 3.3) <span style="font-size:10px;color:#059669;">(1M tokens/dia
                            gr√°tis)</span></label>
                    <div style="display:flex; gap:8px;">
                        <input type="password" id="config-cerebras-key" placeholder="Cole sua chave csk-..."
                            style="flex:1;" onchange="window.iaConsultor.salvarTodasChaves()">
                        <button type="button" class="btn-sm" style="white-space:nowrap; background:#7C3AED;"
                            onclick="var el=document.getElementById('config-cerebras-key'); el.type = el.type==='password' ? 'text' : 'password';">üëÅÔ∏è</button>
                    </div>
                    <p class="info-note" style="margin-top:4px; font-size:10px;">
                        <a href="https://cloud.cerebras.ai/" target="_blank"
                            style="color:#7C3AED;">cloud.cerebras.ai</a>
                    </p>
                </div>

                <!-- OpenRouter -->
                <div class="form-group">
                    <label>üü¢ OpenRouter (Multi-modelo) <span style="font-size:10px;color:#059669;">(modelos
                            gr√°tis)</span></label>
                    <div style="display:flex; gap:8px;">
                        <input type="password" id="config-openrouter-key" placeholder="Cole sua chave sk-or-..."
                            style="flex:1;" onchange="window.iaConsultor.salvarTodasChaves()">
                        <button type="button" class="btn-sm" style="white-space:nowrap; background:#059669;"
                            onclick="var el=document.getElementById('config-openrouter-key'); el.type = el.type==='password' ? 'text' : 'password';">üëÅÔ∏è</button>
                    </div>
                    <p class="info-note" style="margin-top:4px; font-size:10px;">
                        <a href="https://openrouter.ai/keys" target="_blank"
                            style="color:#059669;">openrouter.ai/keys</a>
                    </p>
                </div>

                <button type="button" class="submit-btn" style="margin-top:8px;background:#059669;"
                    onclick="window.iaConsultor.salvarTodasChaves()">üíæ Salvar Todas as Chaves</button>
                <button type="button" class="submit-btn" style="margin-top:8px;background:#2563EB;"
                    onclick="window.iaConsultor.testarChave()">üß™ Testar Conex√£o IA</button>
            </div>

            <div class="card-form" style="margin-top:16px;">
                <div class="section-title">Dados</div>
                <button type="button" class="submit-btn" style="margin-bottom:10px;"
                    onclick="window.app.exportData()">üì§ Exportar Dados (JSON)</button>
                <button type="button" class="submit-btn"
                    style="margin-bottom:10px; background:linear-gradient(135deg,#2563EB,#7C3AED);"
                    onclick="document.getElementById('import-file-input').click()">üì• Importar Dados (JSON)</button>
                <input type="file" id="import-file-input" accept=".json" style="display:none;"
                    onchange="window.app.importData(event)">
                <button type="button" class="submit-btn danger-btn" onclick="window.app.resetData()">Zerar Todos os
                    Dados</button>
                <p class="info-note" style="margin-top:15px;">Esta a√ß√£o apaga todos os registros. N√£o pode ser desfeita.
                </p>
            </div>

            <div class="card-form" style="margin-top:16px;">
                <div class="section-title">Sobre</div>
                <p style="font-size:12px; color:var(--text-2); line-height:1.6;">
                    <strong>AgroMacro</strong> v3.0<br>
                    Sistema de Gest√£o Pecu√°ria<br>
                    Dados salvos localmente + nuvem Firebase
                </p>
            </div>
        </section>

        <!-- ===================== CALEND√ÅRIO SANIT√ÅRIO ===================== -->
        <section id="view-calendario" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Calend√°rio Sanit√°rio</h2>
            </div>
            <div id="calendario-content"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioCalendario('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioCalendario('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- ===================== CONTAS A PAGAR ===================== -->
        <section id="view-contas" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Contas a Pagar</h2>
            </div>
            <div id="contas-pagar-content"></div>
            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="button" class="submit-btn" style="flex:1;"
                    onclick="window.relatorio.relatorioContas('pdf')">üìÑ Salvar PDF</button>
                <button type="button" class="submit-btn"
                    style="flex:1; background:linear-gradient(135deg,#1E3A5F,#1E40AF);"
                    onclick="window.relatorio.relatorioContas('print')">üñ®Ô∏è Imprimir</button>
            </div>
        </section>

        <!-- HUBS REMOVIDOS ‚Äî navega√ß√£o direta via bottom nav para lotes/fluxo/estoque -->

        <!-- ===================== CABE√áAS INDIVIDUAIS ===================== -->
        <section id="view-cabecas" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">‚Üê</button>
                <h2>Cabe√ßas Individuais</h2>
            </div>

            <!-- Search + Filters -->
            <div class="search-bar" style="margin-bottom:12px;">
                <input type="text" id="cab-search" placeholder="Buscar por brinco, nome ou ra√ßa..."
                    oninput="window.cabecas.setFilter('text', this.value)">
            </div>
            <div class="filter-bar" style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
                <button type="button" class="filter-btn active"
                    onclick="window.cabecas.setFilter('sexo','todos'); this.parentNode.querySelectorAll('.filter-btn').forEach(function(b){b.classList.remove('active')}); this.classList.add('active')">Todos</button>
                <button type="button" class="filter-btn"
                    onclick="window.cabecas.setFilter('sexo','macho'); this.parentNode.querySelectorAll('.filter-btn').forEach(function(b){b.classList.remove('active')}); this.classList.add('active')">Machos</button>
                <button type="button" class="filter-btn"
                    onclick="window.cabecas.setFilter('sexo','femea'); this.parentNode.querySelectorAll('.filter-btn').forEach(function(b){b.classList.remove('active')}); this.classList.add('active')">F√™meas</button>
                <select id="cab-filter-lote" class="filter-select"
                    onchange="window.cabecas.setFilter('lote', this.value)">
                    <option value="todos">Todos os Lotes</option>
                </select>
            </div>

            <!-- Stats -->
            <div id="cabecas-stats" class="stats-panel"></div>

            <!-- Registration Form -->
            <form id="form-cabeca" class="card-form">
                <div class="section-title">Cadastrar Animal</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>N¬∫ Brinco *</label>
                        <input type="text" id="cab-brinco" placeholder="Ex: 0123" required>
                    </div>
                    <div class="form-group">
                        <label>Chip / RFID / C√≥d. Barras</label>
                        <input type="text" id="cab-chip" placeholder="Ex: 982000...">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome / Apelido</label>
                        <input type="text" id="cab-nome" placeholder="Opcional">
                    </div>
                    <div class="form-group">
                        <label>Tipo Identifica√ß√£o</label>
                        <select id="cab-tipo-id">
                            <option value="brinco">Brinco</option>
                            <option value="chip">Chip Eletr√¥nico</option>
                            <option value="rfid">RFID</option>
                            <option value="barras">C√≥digo de Barras</option>
                            <option value="brinco_chip">Brinco + Chip</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo</label>
                        <select id="cab-sexo">
                            <option value="macho">Macho</option>
                            <option value="femea">F√™mea</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ra√ßa</label>
                        <input type="text" id="cab-raca" placeholder="Ex: Nelore">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso (kg)</label>
                        <input type="number" id="cab-peso" step="0.1" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label>Data de Nascimento</label>
                        <input type="date" id="cab-nascimento">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Lote</label>
                        <select id="cab-lote">
                            <option value="">Sem lote</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Pasto</label>
                        <select id="cab-pasto">
                            <option value="">Sem pasto</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <input type="text" id="cab-obs" placeholder="Opcional">
                </div>
                <div class="form-group">
                    <label>üì∏ Foto do Animal</label>
                    <div style="display:flex; gap:8px; align-items:center;">
                        <input type="file" id="cab-foto" accept="image/*" capture="environment"
                            style="font-size:12px; flex:1;">
                        <img id="cab-foto-preview"
                            style="width:48px;height:48px;border-radius:8px;object-fit:cover;display:none;border:2px solid var(--green);">
                    </div>
                </div>
                <button type="submit" class="submit-btn">Cadastrar Animal</button>
            </form>

            <!-- Animal List -->
            <div class="section-title" style="margin-top:24px;">Animais Cadastrados</div>
            <div id="cabecas-list"></div>
        </section>

        <!-- ===================== MAPA INTERATIVO ===================== -->
        <section id="view-mapa" class="view hidden">
            <div class="mapa-header">
                <button class="mapa-back-btn" onclick="window.app.navigate('home')">‚Üê Voltar</button>
                <h2 class="mapa-title">üó∫Ô∏è Mapa da Fazenda</h2>
            </div>

            <!-- Mini-Dashboard -->
            <div class="mapa-dashboard">
                <div class="mapa-dash-card">
                    <span class="mapa-dash-num" id="dash-total-pastos">0</span>
                    <span class="mapa-dash-label">Pastos</span>
                </div>
                <div class="mapa-dash-card mapa-dash-green">
                    <span class="mapa-dash-num" id="dash-total-cabecas">0</span>
                    <span class="mapa-dash-label">Cabe√ßas</span>
                </div>
                <div class="mapa-dash-card mapa-dash-blue" onclick="window.mapa.showOcupados()" style="cursor:pointer;">
                    <span class="mapa-dash-num" id="dash-ocupados">0</span>
                    <span class="mapa-dash-label">Ocupados</span>
                </div>
                <div class="mapa-dash-card mapa-dash-gray" onclick="window.mapa.filterMap('vazio', this)"
                    style="cursor:pointer;">
                    <span class="mapa-dash-num" id="dash-vazios">0</span>
                    <span class="mapa-dash-label">Vazios</span>
                </div>
                <div class="mapa-dash-card"
                    style="background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-color:#0284c7;">
                    <span class="mapa-dash-num" id="dash-total-hectares" style="color:#0369a1;">0</span>
                    <span class="mapa-dash-label">üìê Hectares</span>
                </div>
            </div>

            <!-- Filtros + Busca -->
            <div class="mapa-controls">
                <div class="mapa-filters">
                    <button class="mapa-filter-btn active" onclick="window.mapa.filterMap('todos', this)">Todos</button>
                    <button class="mapa-filter-btn" onclick="window.mapa.filterMap('gado', this)">üêÑ Com Gado</button>
                    <button class="mapa-filter-btn" onclick="window.mapa.filterMap('obra', this)">üî® Em Obra</button>
                    <button class="mapa-filter-btn" onclick="window.mapa.filterMap('vazio', this)">üåø Vazios</button>
                </div>
                <div class="mapa-search">
                    <input type="text" id="mapa-search-input" placeholder="üîç Buscar pasto..."
                        oninput="window.mapa.searchPasto(this.value)">
                </div>
            </div>

            <div id="mapa-container"></div>

            <!-- Tabela de Pastos (oculta por padr√£o) -->
            <div id="mapa-table-container" class="mapa-table-container hidden"></div>

            <!-- Toolbar -->
            <div class="mapa-toolbar">
                <button class="mapa-tool-btn" onclick="window.mapa.geolocate()" title="Minha localiza√ß√£o">
                    üìç GPS
                </button>
                <button class="mapa-tool-btn" onclick="window.mapa.importKML()"
                    title="Importar arquivo KML do Google Earth">
                    üìÇ KML
                </button>
                <button class="mapa-tool-btn" onclick="window.mapa.fitBounds()" title="Centralizar nos pastos">
                    üéØ Centralizar
                </button>
                <button class="mapa-tool-btn" onclick="window.mapa.toggleTable()" title="Ver tabela de pastos"
                    id="btn-toggle-table">
                    üìã Tabela
                </button>
                <div class="mapa-legenda">
                    <span class="legenda-item"><span class="legenda-cor" style="background:#16A34A;"></span>Com
                        gado</span>
                    <span class="legenda-item"><span class="legenda-cor" style="background:#F97316;"></span>Em
                        obra</span>
                    <span class="legenda-item"><span class="legenda-cor" style="background:#8B95A5;"></span>Vazio</span>
                    <span class="legenda-item"><span class="legenda-cor"
                            style="background:linear-gradient(90deg,#065F46,#86EFAC);"></span>Descanso</span>
                </div>
            </div>
        </section>

    </main>

    <!-- ===================== MODAL: TROCAR PASTO ===================== -->
    <div id="modal-trocar-pasto" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>Trocar Pasto</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-trocar-pasto')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-tp-lote"></span></p>
                <p><strong>Pasto Atual:</strong> <span id="modal-tp-atual"></span></p>
                <div class="form-group">
                    <label>Novo Pasto</label>
                    <select id="modal-tp-novo-pasto">
                        <option value="">Selecionar...</option>
                    </select>
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarTrocaPasto()">‚úÖ Confirmar Troca</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: JUNTAR LOTES ===================== -->
    <div id="modal-juntar-lotes" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>Juntar Lotes</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-juntar-lotes')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p style="font-size:13px; color:#666; margin-bottom:12px;">Selecione 2 ou mais lotes para unir. Os
                    animais ser√£o somados e o peso ser√° a m√©dia ponderada.</p>
                <div id="modal-jl-lista" class="checkbox-list"></div>
                <div class="form-group" style="margin-top:12px;">
                    <label>Nome do Novo Lote</label>
                    <input type="text" id="modal-jl-novo-nome" placeholder="Ex: Lote Unificado 2026">
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarJuntarLotes()">‚úÖ Juntar Lotes</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: ABASTECER COCHO ===================== -->
    <div id="modal-abastecer" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>Abastecer Cocho</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-abastecer')">‚úï</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-ab-lote"></span></p>
                <p><strong>Produto:</strong> <span id="modal-ab-tipo"></span></p>
                <input type="hidden" id="modal-ab-produto" value="">
                <p id="modal-ab-consumo-info" style="font-size:12px; color:#666; margin-bottom:10px;"></p>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Sacos</label>
                        <input type="number" id="modal-ab-sacos" placeholder="4"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                    <div class="form-group">
                        <label>Kg por Saco</label>
                        <input type="number" id="modal-ab-kg-saco" value="25" step="0.5"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                </div>
                <div id="modal-ab-previsao" class="previsao-box"></div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarAbastecimento()">‚úÖ Registrar
                    Abastecimento</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation Bar ‚Äî 5 Abas Organizadas -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="window.app.navigate('home')" id="nav-home">
            <span class="nav-icon" data-icon="home"></span>
            Home
        </button>
        <button class="nav-item" onclick="window.app.navigate('lotes')" id="nav-rebanho">
            <span class="nav-icon" data-icon="rebanho"></span>
            Rebanho
        </button>
        <button class="nav-item gerencia-only" onclick="window.app.navigate('financeiro')" id="nav-financeiro">
            <span class="nav-icon" data-icon="financeiro"></span>
            Financeiro
        </button>
        <button class="nav-item" onclick="window.app.navigate('operacoes')" id="nav-operacoes">
            <span class="nav-icon" data-icon="operacoes"></span>
            Opera√ß√µes
        </button>
        <button class="nav-item" onclick="window.app.navigate('config')" id="nav-config">
            <span class="nav-icon" data-icon="config"></span>
            Config
        </button>
    </nav>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <!-- Scripts -->
    <script src="js/icons.js?v=20260212a"></script>
    <script src="js/data.js?v=20260219b"></script>
    <script src="js/rebanho.js?v=20260211r"></script>
    <script src="js/pastos.js?v=20260211r"></script>
    <script src="js/lotes.js?v=20260211r"></script>
    <script src="js/obras.js?v=20260211r"></script>
    <script src="js/manejo.js?v=20260211r"></script>
    <script src="js/financeiro.js?v=20260211r"></script>
    <script src="js/estoque.js?v=20260211r"></script>
    <script src="js/funcionarios.js?v=20260211r"></script>
    <script src="js/rebanho-ops.js?v=20260211s"></script>
    <script src="js/clima.js"></script>
    <script src="js/pasto-mgmt.js?v=20260211s"></script>
    <script src="js/calendario.js?v=20260212b"></script>
    <script src="js/graficos.js?v=20260212a"></script>
    <script src="js/relatorio.js?v=20260212a"></script>
    <script src="js/contas.js?v=20260211s"></script>
    <script src="js/indicadores.js?v=20260211s"></script>
    <script src="js/nutricao.js"></script>
    <script src="js/balanca.js"></script>
    <script src="js/blockchain.js"></script>
    <script src="js/cabecas.js?v=20260212a"></script>
    <script src="js/rastreabilidade.js"></script>
    <script src="js/fotos.js?v=20260213a"></script>
    <script src="js/fazenda-data.js?v=20260219a"></script>
    <script src="js/mapa.js?v=20260220b"></script>
    <script src="js/ia-consultor.js?v=20260220a"></script>
    <script src="js/ux-helpers.js?v=20260219a"></script>
    <script src="js/resultados.js?v=20260219a"></script>
    <script src="js/firebase-sync.js?v=20260219a"></script>

    <script src="app.js?v=20260220b"></script>

    <!-- Theme & Greeting Init -->
    <script>
        (function () {
            var h = new Date().getHours();

            // Light mode only ‚Äî no dark mode

            // Greeting
            var greetEl = document.getElementById('greeting-text');
            var dateEl = document.getElementById('greeting-date');
            if (greetEl) {
                if (h < 6) greetEl.textContent = 'Boa madrugada';
                else if (h < 12) greetEl.textContent = 'Bom dia';
                else if (h < 18) greetEl.textContent = 'Boa tarde';
                else greetEl.textContent = 'Boa noite';
            }
            if (dateEl) {
                var days = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
                var months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
                var now = new Date();
                dateEl.textContent = days[now.getDay()] + ', ' + now.getDate() + ' de ' + months[now.getMonth()] + ' de ' + now.getFullYear();
            }

            // Inject SVG icons into all data-icon elements
            if (window.ICONS) {
                document.querySelectorAll('[data-icon]').forEach(function (el) {
                    var key = el.getAttribute('data-icon');
                    if (window.ICONS[key]) el.innerHTML = window.ICONS[key];
                });
            }
        })();
    </script>

    <script>
        // Register Service Worker with AUTO-UPDATE
        if ('serviceWorker' in navigator) {
            var refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', function () {
                if (!refreshing) {
                    refreshing = true;
                    console.log('[PWA] Nova vers√£o detectada! Recarregando...');
                    window.location.reload();
                }
            });
            navigator.serviceWorker.register('/sw.js').then(function (reg) {
                console.log('[PWA] Service Worker registered:', reg.scope);
                // Check for updates every 60 seconds
                setInterval(function () {
                    reg.update().catch(function () { });
                }, 60000);
                // Also check immediately
                reg.update().catch(function () { });
            }).catch(function (err) {
                console.log('[PWA] SW registration failed:', err);
            });
        }
    </script>

    <!-- IA Consultor Modal -->
    <div id="ia-modal" class="ia-modal">
        <div class="ia-modal-content">
            <div class="ia-header">
                <div class="ia-header-left">
                    <span class="ia-header-icon">ü§ñ</span>
                    <div>
                        <div class="ia-header-title">AgroIA</div>
                        <div class="ia-header-sub">Secret√°ria & Consultor ‚Ä¢ Gemini AI</div>
                    </div>
                </div>
                <div class="ia-header-actions">
                    <button class="ia-header-btn" onclick="window.iaConsultor.limparHistorico()"
                        title="Limpar">üóëÔ∏è</button>
                    <button class="ia-header-btn" onclick="window.iaConsultor.toggle()" title="Fechar">‚úï</button>
                </div>
            </div>
            <div id="ia-messages" class="ia-messages"></div>
            <div id="ia-typing" class="ia-typing" style="display:none;">
                <div class="ia-typing-dots"><span></span><span></span><span></span></div>
                <span>AgroIA est√° analisando seus dados...</span>
            </div>
            <div class="ia-input-bar">
                <button id="ia-mic-btn" class="ia-mic-btn" onclick="window.iaConsultor._toggleVoz()"
                    title="Falar por voz">üéôÔ∏è</button>
                <input type="text" id="ia-input" class="ia-input" placeholder="Fale ou digite..." autocomplete="off">
                <button class="ia-send-btn" onclick="window.iaConsultor._enviarDoInput()">‚û§</button>
            </div>
        </div>
    </div>
</body>

</html>