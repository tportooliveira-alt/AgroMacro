<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgroMacro</title>
    <link rel="stylesheet" href="styles.css?v=20260211q">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0F1318">
</head>

<body>

    <!-- Header -->
    <header class="app-header">
        <div class="logo-container">
            <svg class="logo-svg" width="32" height="32" viewBox="0 0 100 100">
                <path
                    d="M15 75 Q15 45 35 35 Q45 30 55 35 Q65 40 68 50 L85 45 Q88 42 90 45 L88 50 Q85 52 82 50 L70 54 Q72 62 68 70 L72 85 L65 85 L62 72 Q55 78 45 78 Q38 78 32 72 L30 85 L23 85 L27 70 Q22 62 22 55"
                    fill="#D4A843" />
                <circle cx="40" cy="42" r="3" fill="#0F1318" />
            </svg>
            <h1>AgroMacro</h1>
        </div>
        <button id="menu-btn" class="icon-btn" onclick="window.app.navigate('config')">âš™ï¸</button>
    </header>

    <main id="app-container">

        <!-- ===================== HOME ===================== -->
        <section id="view-home" class="view active">

            <!-- Hero Greeting -->
            <div class="hero-greeting">
                <div class="greeting-text" id="greeting-text">ğŸ¤  Boa tarde</div>
                <div class="greeting-sub" id="greeting-date"></div>
            </div>

            <!-- KPI Dashboard â€” Operational only, no financial values -->
            <div class="kpi-section">
                <div class="kpi-title">Painel da Fazenda</div>
                <div class="kpi-grid" id="kpi-grid"></div>
            </div>

            <!-- Quick Actions â€” Atalhos RÃ¡pidos -->
            <div class="kpi-title" style="margin-top:4px;">AÃ§Ãµes RÃ¡pidas</div>
            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('compra')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #EF4444, #DC2626);">ğŸ‚</div>
                    <span class="home-card-title">Compra</span>
                    <span class="home-card-sub">Registrar compra</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('venda')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #22C55E, #16A34A);">ğŸ’°</div>
                    <span class="home-card-title">Venda</span>
                    <span class="home-card-sub">Registrar venda</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('manejo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8);">ğŸ’‰</div>
                    <span class="home-card-title">Manejo</span>
                    <span class="home-card-sub">RÃ¡pido</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('estoque')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">ğŸ“¦</div>
                    <span class="home-card-title">Abastecer</span>
                    <span class="home-card-sub">Estoque</span>
                </button>
            </div>

            <!-- CotaÃ§Ã£o do Rebanho em PÃ© -->
            <div id="cotacao-rebanho" style="margin-top:16px;"></div>

            <!-- Alerts Section -->
            <div class="alerts-section">
                <div class="alerts-title">âš ï¸ Alertas</div>
                <div id="alerts-list"></div>
            </div>

        </section>

        <!-- ===================== FINANCEIRO HUB ===================== -->
        <section id="view-financeiro" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>ğŸ’² Financeiro</h2>
            </div>

            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('compra')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #14B8A6, #0D9488);">ğŸ‚</div>
                    <span class="home-card-title">Compra de Gado</span>
                    <span class="home-card-sub">Registrar entrada</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('venda')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #10B981, #059669);">ğŸ’°</div>
                    <span class="home-card-title">Venda de Gado</span>
                    <span class="home-card-sub">Registrar saÃ­da</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('fluxo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">ğŸ“Š</div>
                    <span class="home-card-title">Fluxo de Caixa</span>
                    <span class="home-card-sub">Entradas e saÃ­das</span>
                </button>

                <button class="home-card" onclick="window.app.navigate('balanco')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #6366F1, #4F46E5);">ğŸ“‹</div>
                    <span class="home-card-title">BalanÃ§o / DRE</span>
                    <span class="home-card-sub">Resultado operacional</span>
                </button>
            </div>

            <!-- Quick links -->
            <div class="tertiary-actions" style="margin-top: 8px;">
                <button class="action-btn" onclick="window.app.navigate('obras')">ğŸ”¨ Obras</button>
                <button class="action-btn" onclick="window.app.navigate('funcionarios')">ğŸ‘· FuncionÃ¡rios</button>
            </div>
        </section>

        <!-- ===================== COMPRA DE GADO ===================== -->
        <section id="view-compra" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>Compra de Gado</h2>
            </div>
            <form id="form-compra" class="card-form">
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="compra-qty" placeholder="30" required>
                </div>
                <div class="form-group">
                    <label>Peso MÃ©dio (kg)</label>
                    <input type="number" id="compra-peso" step="0.1" placeholder="220">
                </div>
                <div class="form-group">
                    <label>Valor Total Pago (R$)</label>
                    <input type="number" id="compra-valor" step="0.01" placeholder="120000.00" required>
                </div>
                <div class="form-group">
                    <label>DescriÃ§Ã£o</label>
                    <input type="text" id="compra-desc" placeholder="Ex: 30 Bezerros Nelore">
                </div>
                <div class="form-group">
                    <label>Fornecedor</label>
                    <input type="text" id="compra-fornecedor" placeholder="Ex: Fazenda SÃ£o JoÃ£o">
                </div>
                <div class="form-group">
                    <label>Lote de Destino</label>
                    <select id="compra-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="compra-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Compra</button>
            </form>
        </section>

        <!-- ===================== VENDA DE GADO ===================== -->
        <section id="view-venda" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>Venda de Gado</h2>
            </div>
            <form id="form-venda" class="card-form">
                <div class="form-group">
                    <label>Lote</label>
                    <select id="venda-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="venda-qty" placeholder="5" required>
                </div>
                <div class="form-group">
                    <label>Peso MÃ©dio (kg)</label>
                    <input type="number" id="venda-peso" step="0.1" placeholder="480">
                </div>
                <div class="form-group">
                    <label>Valor Total (R$)</label>
                    <input type="number" id="venda-valor" step="0.01" placeholder="25000.00" required>
                </div>
                <div class="form-group">
                    <label>Comprador</label>
                    <input type="text" id="venda-comprador" placeholder="Ex: FrigorÃ­fico XYZ">
                </div>
                <div class="form-group">
                    <label>DescriÃ§Ã£o</label>
                    <input type="text" id="venda-desc" placeholder="Ex: Venda 5 Bois Gordos">
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="venda-data" required>
                </div>
                <button type="submit" class="submit-btn">Registrar Venda</button>
            </form>
        </section>

        <!-- ===================== REBANHO ===================== -->
        <section id="view-rebanho" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸ„ Cadastro de Rebanho</h2>
            </div>
            <!-- Tabs -->
            <div class="tab-bar">
                <button class="tab-btn active" onclick="window.rebanho.switchTab('individual', this)">ğŸ®
                    Individual</button>
                <button class="tab-btn" onclick="window.rebanho.switchTab('lote', this)">ğŸ“‹ Por Lote</button>
            </div>

            <!-- Tab: Individual -->
            <form id="form-rebanho" class="card-form tab-content active" data-tab="individual">
                <div class="form-row">
                    <div class="form-group">
                        <label>Brinco / ID</label>
                        <input type="text" id="reb-brinco" placeholder="Ex: B-001" required>
                    </div>
                    <div class="form-group">
                        <label>RaÃ§a</label>
                        <select id="reb-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="TabapuÃ£">TabapuÃ£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="MestiÃ§o">MestiÃ§o</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo</label>
                        <select id="reb-sexo">
                            <option value="macho">â™‚ Macho</option>
                            <option value="femea">â™€ FÃªmea</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Peso Atual (kg)</label>
                        <input type="number" id="reb-peso" step="0.1" placeholder="220">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data Nascimento</label>
                        <input type="date" id="reb-nascimento">
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">DoaÃ§Ã£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote</label>
                    <select id="reb-lote">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ObservaÃ§Ãµes</label>
                    <input type="text" id="reb-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">ğŸ“‹ Cadastrar Animal</button>
            </form>

            <!-- Tab: Por Lote (cadastro em grupo) -->
            <form id="form-rebanho-lote" class="card-form tab-content" data-tab="lote" style="display:none;">
                <div class="form-group">
                    <label>Nome / IdentificaÃ§Ã£o do Lote</label>
                    <input type="text" id="reb-lote-nome" placeholder="Ex: Lote Compra Jan/2026" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Animais</label>
                        <input type="number" id="reb-lote-qtd" placeholder="30" required>
                    </div>
                    <div class="form-group">
                        <label>RaÃ§a Predominante</label>
                        <select id="reb-lote-raca">
                            <option value="Nelore">Nelore</option>
                            <option value="Angus">Angus</option>
                            <option value="Brahman">Brahman</option>
                            <option value="Gir">Gir</option>
                            <option value="Girolando">Girolando</option>
                            <option value="TabapuÃ£">TabapuÃ£</option>
                            <option value="Senepol">Senepol</option>
                            <option value="MestiÃ§o">MestiÃ§o</option>
                            <option value="Outra">Outra</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso MÃ©dio (kg)</label>
                        <input type="number" id="reb-lote-peso" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Idade MÃ©dia (meses)</label>
                        <input type="number" id="reb-lote-idade" placeholder="18">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sexo Predominante</label>
                        <select id="reb-lote-sexo">
                            <option value="macho">â™‚ Machos</option>
                            <option value="femea">â™€ FÃªmeas</option>
                            <option value="misto">âš¤ Misto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Origem</label>
                        <select id="reb-lote-origem">
                            <option value="compra">Compra</option>
                            <option value="nascimento">Nascimento</option>
                            <option value="doacao">DoaÃ§Ã£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Lote Destino</label>
                    <select id="reb-lote-destino">
                        <option value="">Sem Lote</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ObservaÃ§Ãµes</label>
                    <input type="text" id="reb-lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">ğŸ“‹ Cadastrar Lote de Animais</button>
            </form>

            <div class="section-title" style="margin-top:24px;">Rebanho Atual</div>
            <div id="rebanho-list"></div>
        </section>

        <!-- ===================== LOTES ===================== -->
        <section id="view-lotes" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸ“‹ GestÃ£o de Lotes</h2>
            </div>
            <form id="form-lote" class="card-form">
                <div class="form-group">
                    <label>Nome do Lote</label>
                    <input type="text" id="lote-nome" placeholder="Ex: Lote SÃ£o JoÃ£o" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="lote-categoria">
                            <option value="cria">ğŸ® Cria</option>
                            <option value="recria">ğŸ‚ Recria</option>
                            <option value="engorda">ğŸ¥© Engorda</option>
                            <option value="matrizes">ğŸ„ Matrizes</option>
                            <option value="touros">ğŸƒ Touros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Qtd Animais</label>
                        <input type="number" id="lote-qtd" placeholder="30" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>RaÃ§a Predominante</label>
                    <select id="lote-raca">
                        <option value="">Selecionar...</option>
                        <option value="Nelore">Nelore</option>
                        <option value="Angus">Angus</option>
                        <option value="Nelore x Angus">Nelore x Angus</option>
                        <option value="Brahman">Brahman</option>
                        <option value="Gir">Gir</option>
                        <option value="Girolando">Girolando</option>
                        <option value="TabapuÃ£">TabapuÃ£</option>
                        <option value="Senepol">Senepol</option>
                        <option value="Nelore PO">Nelore PO</option>
                        <option value="MestiÃ§o">MestiÃ§o</option>
                        <option value="Outra">Outra</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Peso MÃ©dio (kg)</label>
                        <input type="number" id="lote-peso-medio" step="0.1" placeholder="220">
                    </div>
                    <div class="form-group">
                        <label>Pasto Atual</label>
                        <select id="lote-pasto">
                            <option value="">Selecionar...</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Data de Entrada</label>
                    <input type="date" id="lote-data-entrada">
                </div>
                <div class="section-title" style="margin-top:12px;">ğŸ§‚ NutriÃ§Ã£o do Lote</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Sal Mineral</label>
                        <select id="lote-sal">
                            <option value="">Nenhum</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo Sal (g/cab/dia)</label>
                        <input type="number" id="lote-sal-consumo" step="0.1" placeholder="80">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>RaÃ§Ã£o</label>
                        <select id="lote-racao">
                            <option value="">Nenhuma</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Consumo RaÃ§Ã£o (kg/cab/dia)</label>
                        <input type="number" id="lote-racao-consumo" step="0.1" placeholder="2.5">
                    </div>
                </div>
                <div class="form-group">
                    <label>ObservaÃ§Ãµes</label>
                    <input type="text" id="lote-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">ğŸ“‹ Cadastrar Lote</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Lotes Ativos</div>
            <div id="lotes-list"></div>
            <div id="indicadores-produtivos" style="margin-top:16px;"></div>
        </section>

        <!-- ===================== PASTOS ===================== -->
        <section id="view-pastos" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸŒ¾ Cadastro de Pastos</h2>
            </div>
            <form id="form-pasto" class="card-form">
                <div class="form-group">
                    <label>Nome do Pasto / Piquete</label>
                    <input type="text" id="pasto-nome" placeholder="Ex: Piquete Norte" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ãrea (hectares)</label>
                        <input type="number" id="pasto-area" step="0.1" placeholder="15.0">
                    </div>
                    <div class="form-group">
                        <label>Capacidade (cabeÃ§as)</label>
                        <input type="number" id="pasto-capacidade" placeholder="50">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo de Capim</label>
                        <select id="pasto-tipo">
                            <option value="BraquiÃ¡ria">BraquiÃ¡ria</option>
                            <option value="MombaÃ§a">MombaÃ§a</option>
                            <option value="Tifton">Tifton</option>
                            <option value="Marandu">Marandu</option>
                            <option value="TanzÃ¢nia">TanzÃ¢nia</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="pasto-status">
                            <option value="disponivel">ğŸŸ¢ DisponÃ­vel</option>
                            <option value="ocupado">ğŸ”´ Ocupado</option>
                            <option value="descanso">ğŸŸ¡ Em Descanso</option>
                            <option value="manutencao">ğŸ”§ ManutenÃ§Ã£o</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ObservaÃ§Ãµes</label>
                    <input type="text" id="pasto-obs" placeholder="Opcional">
                </div>
                <button type="submit" class="submit-btn">ğŸŒ¾ Cadastrar Pasto</button>
            </form>
            <div class="section-title" style="margin-top:24px;">Pastos Cadastrados</div>
            <div id="pastos-list"></div>
        </section>

        <!-- ===================== ESTOQUE ===================== -->
        <section id="view-estoque" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('operacoes-hub')">â†</button>
                <h2>ğŸ“¦ Estoque de Insumos</h2>
            </div>
            <!-- Quick add form -->
            <form id="form-estoque" class="card-form" style="margin-bottom:16px;">
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="est-categoria" onchange="window.estoque.onCategoryChange()">
                        <option value="racao_sal">ğŸ§‚ RaÃ§Ã£o / Sal Mineral</option>
                        <option value="remedios">ğŸ’Š RemÃ©dios / Vacinas</option>
                        <option value="obras">ğŸ”¨ Obras / Ferramentas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Produto</label>
                    <select id="est-produto-sugestao" onchange="window.estoque.onSuggestionSelect()">
                        <option value="">â€” Selecionar ou digitar abaixo â€”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Nome do Produto</label>
                    <input type="text" id="est-produto" placeholder="Ex: Sal Mineral Fosbovi" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Qtd de Sacos</label>
                        <input type="number" id="est-qty" placeholder="10" required
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Peso por Saco (kg)</label>
                        <input type="number" id="est-peso-saco" step="0.1" placeholder="25" value="25"
                            oninput="window.estoque.calcTotal()">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor por Saco (R$)</label>
                        <input type="number" id="est-valor" step="0.01" placeholder="85.00"
                            oninput="window.estoque.calcTotal()">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <input type="text" id="est-unit" placeholder="sacos" value="sacos">
                    </div>
                </div>
                <div id="est-total-preview" class="calc-preview" style="display:none;">
                </div>
                <button type="submit" class="submit-btn">ğŸ“¥ Registrar Entrada</button>
            </form>
            <!-- Filter -->
            <div class="filter-bar" style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
                <button type="button" class="filter-btn active" onclick="window.estoque.filterBy('todos')">ğŸ“¦
                    Todos</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('racao_sal')">ğŸ§‚
                    RaÃ§Ã£o/Sal</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('remedios')">ğŸ’Š
                    RemÃ©dios</button>
                <button type="button" class="filter-btn" onclick="window.estoque.filterBy('obras')">ğŸ”¨ Obras</button>
            </div>
            <div id="estoque-list"></div>
        </section>

        <!-- ===================== FLUXO DE CAIXA ===================== -->
        <section id="view-fluxo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>ğŸ’° Fluxo de Caixa</h2>
            </div>
            <div id="fluxo-content"></div>
            <div id="indicadores-financeiros"></div>
        </section>

        <!-- ===================== MANEJO ===================== -->
        <section id="view-manejo" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸ’‰ Manejo</h2>
            </div>
            <form id="form-manejo" class="card-form">
                <div class="form-group">
                    <label>Tipo de Manejo</label>
                    <select id="manejo-tipo">
                        <option value="vacinacao">ğŸ©º VacinaÃ§Ã£o / SanitÃ¡rio</option>
                        <option value="pesagem">âš–ï¸ Pesagem</option>
                        <option value="movimentacao">ğŸ”„ MovimentaÃ§Ã£o de Pasto</option>
                        <option value="mortalidade">âš ï¸ Mortalidade</option>
                        <option value="outro">ğŸ“ Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Lote</label>
                    <select id="manejo-lote">
                        <option value="">Selecionar Lote...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Produto / DescriÃ§Ã£o</label>
                    <select id="manejo-produto"
                        onchange="if(this.value==='__outro__'){document.getElementById('manejo-desc-custom').style.display='block'}else{document.getElementById('manejo-desc-custom').style.display='none'}">
                        <option value="">Selecionar do Estoque...</option>
                    </select>
                    <input type="text" id="manejo-desc-custom" placeholder="Descreva o manejo..."
                        style="display:none; margin-top:8px;">
                    <input type="hidden" id="manejo-desc" value="">
                </div>
                <div class="form-group">
                    <label>Quantidade de Animais</label>
                    <input type="number" id="manejo-qtd" placeholder="0">
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="manejo-data" required>
                </div>
                <div class="section-title">Materiais Utilizados (do Estoque)</div>
                <div id="manejo-materials-list" class="materials-list"></div>
                <div class="form-group">
                    <label>Custo Estimado (R$)</label>
                    <input type="number" id="manejo-custo" step="0.01" placeholder="0,00">
                </div>
                <button type="submit" class="submit-btn">âœ… Registrar Manejo</button>
            </form>
            <div class="section-title" style="margin-top:24px;">HistÃ³rico de Manejos</div>
            <div id="manejo-history"></div>
        </section>

        <!-- ===================== OBRAS ===================== -->
        <section id="view-obras" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('operacoes-hub')">â†</button>
                <h2>ğŸ”¨ Registrar Obra</h2>
            </div>
            <form id="form-obra" class="card-form">
                <div class="form-group">
                    <label>Nome da Obra</label>
                    <input type="text" id="obra-nome" placeholder="Ex: Cercamento Curral 2" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data de InÃ­cio</label>
                        <input type="date" id="obra-inicio" required>
                    </div>
                    <div class="form-group">
                        <label>Data de TÃ©rmino</label>
                        <input type="date" id="obra-fim">
                    </div>
                </div>
                <div class="form-group">
                    <label>ObservaÃ§Ãµes</label>
                    <textarea id="obra-obs" rows="2"></textarea>
                </div>
                <div class="section-title">FuncionÃ¡rios na Obra</div>
                <div id="workers-list" class="workers-grid"></div>
                <button type="button" class="add-btn" onclick="window.obras.addWorker()">+ Adicionar
                    FuncionÃ¡rio</button>
                <div class="section-title">Materiais Utilizados (do Estoque)</div>
                <div id="obra-materials-list" class="materials-list"></div>
                <button type="submit" class="submit-btn">âœ… Registrar Obra</button>
            </form>
        </section>

        <!-- ===================== FUNCIONÃRIOS ===================== -->
        <section id="view-funcionarios" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('operacoes-hub')">â†</button>
                <h2>ğŸ‘· FuncionÃ¡rios</h2>
            </div>
            <form id="form-funcionario" class="card-form">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="func-nome" placeholder="Ex: JoÃ£o da Silva" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>FunÃ§Ã£o</label>
                        <select id="func-funcao">
                            <option value="PeÃ£o">ğŸ¤  PeÃ£o</option>
                            <option value="Tratorista">ğŸšœ Tratorista</option>
                            <option value="Cercador">ğŸ”§ Cercador</option>
                            <option value="Vaqueiro">ğŸ„ Vaqueiro</option>
                            <option value="Capataz">ğŸ‘” Capataz</option>
                            <option value="Servicos Gerais">ğŸ§¹ ServiÃ§os Gerais</option>
                            <option value="Diarista">ğŸ“‹ Diarista</option>
                            <option value="Outro">ğŸ“ Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>DiÃ¡ria (R$)</label>
                        <input type="number" id="func-diaria" step="0.01" placeholder="150.00">
                    </div>
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="func-telefone" placeholder="(xx) xxxxx-xxxx">
                </div>
                <button type="submit" class="submit-btn">âœ… Cadastrar FuncionÃ¡rio</button>
            </form>
            <div class="section-title" style="margin-top:24px;">FuncionÃ¡rios Cadastrados</div>
            <div id="funcionarios-list"></div>
        </section>

        <!-- ===================== BALANÃ‡O / DRE ===================== -->
        <section id="view-balanco" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>ğŸ“Š BalanÃ§o & DRE</h2>
            </div>
            <div id="balanco-content"></div>
        </section>

        <!-- ===================== CONFIGURAÃ‡Ã•ES ===================== -->
        <section id="view-config" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('home')">â†</button>
                <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
            </div>
            <div class="card-form">
                <div class="section-title">Dados</div>
                <button type="button" class="submit-btn danger-btn" onclick="window.app.resetData()">ğŸ—‘ï¸ Zerar Todos os
                    Dados</button>
                <p class="info-note" style="margin-top:15px;">âš ï¸ Esta aÃ§Ã£o apaga todos os registros. NÃ£o pode ser
                    desfeita.</p>
            </div>
        </section>

        <!-- ===================== CALENDÃRIO SANITÃRIO ===================== -->
        <section id="view-calendario" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸ—“ï¸ CalendÃ¡rio SanitÃ¡rio</h2>
            </div>
            <div id="calendario-content"></div>
        </section>

        <!-- ===================== CONTAS A PAGAR ===================== -->
        <section id="view-contas" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('financeiro-hub')">â†</button>
                <h2>ğŸ“‹ Contas a Pagar</h2>
            </div>
            <div id="contas-pagar-content"></div>
        </section>

        <!-- ===================== HUB: REBANHO ===================== -->
        <section id="view-rebanho-hub" class="view hidden">
            <div class="view-header">
                <h2>ğŸ„ Rebanho</h2>
            </div>
            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('lotes')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F97316, #EA580C);">ğŸ“‹</div>
                    <span class="home-card-title">Lotes</span>
                    <span class="home-card-sub">GestÃ£o por lote</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('cabecas')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">ğŸ®</div>
                    <span class="home-card-title">CabeÃ§as</span>
                    <span class="home-card-sub">Individual</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('pastos')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #22C55E, #16A34A);">ğŸŒ¿</div>
                    <span class="home-card-title">Pastos</span>
                    <span class="home-card-sub">Piquetes e rotaÃ§Ã£o</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('manejo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8);">ğŸ’‰</div>
                    <span class="home-card-title">Manejo</span>
                    <span class="home-card-sub">Vacinas e pesagem</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('calendario')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #EF4444, #DC2626);">ğŸ—“ï¸</div>
                    <span class="home-card-title">CalendÃ¡rio</span>
                    <span class="home-card-sub">SanitÃ¡rio</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('rebanho')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #0EA5E9, #0284C7);">ğŸ“Š</div>
                    <span class="home-card-title">Indicadores</span>
                    <span class="home-card-sub">Produtivos</span>
                </button>
            </div>
        </section>

        <!-- ===================== HUB: FINANCEIRO ===================== -->
        <section id="view-financeiro-hub" class="view hidden">
            <div class="view-header">
                <h2>ğŸ’° Financeiro</h2>
            </div>
            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('compra')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #EF4444, #DC2626);">ğŸ„</div>
                    <span class="home-card-title">Compra</span>
                    <span class="home-card-sub">Compra de gado</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('venda')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #22C55E, #16A34A);">ğŸ’°</div>
                    <span class="home-card-title">Venda</span>
                    <span class="home-card-sub">Venda de gado</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('fluxo')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8);">ğŸ“ˆ</div>
                    <span class="home-card-title">Fluxo</span>
                    <span class="home-card-sub">Caixa</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('balanco')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #06B6D4, #0891B2);">ğŸ“Š</div>
                    <span class="home-card-title">BalanÃ§o</span>
                    <span class="home-card-sub">DRE</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('contas')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">ğŸ“‹</div>
                    <span class="home-card-title">Contas</span>
                    <span class="home-card-sub">A pagar</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('financeiro')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">ğŸ“</div>
                    <span class="home-card-title">Indicadores</span>
                    <span class="home-card-sub">Financeiros</span>
                </button>
            </div>
        </section>

        <!-- ===================== HUB: OPERAÃ‡Ã•ES ===================== -->
        <section id="view-operacoes-hub" class="view hidden">
            <div class="view-header">
                <h2>ğŸ“¦ OperaÃ§Ãµes</h2>
            </div>
            <div class="home-grid">
                <button class="home-card" onclick="window.app.navigate('estoque')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">ğŸ“¦</div>
                    <span class="home-card-title">Estoque</span>
                    <span class="home-card-sub">Insumos e raÃ§Ã£o</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('obras')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #64748B, #475569);">ğŸ”¨</div>
                    <span class="home-card-title">Obras</span>
                    <span class="home-card-sub">ConstruÃ§Ãµes</span>
                </button>
                <button class="home-card" onclick="window.app.navigate('funcionarios')">
                    <div class="home-card-icon" style="background: linear-gradient(135deg, #0F766E, #0D5D56);">ğŸ‘·</div>
                    <span class="home-card-title">FuncionÃ¡rios</span>
                    <span class="home-card-sub">Equipe</span>
                </button>
            </div>
        </section>

        <!-- ===================== CABEÃ‡AS INDIVIDUAIS (placeholder) ===================== -->
        <section id="view-cabecas" class="view hidden">
            <div class="view-header">
                <button class="back-btn" onclick="window.app.navigate('rebanho-hub')">â†</button>
                <h2>ğŸ® CabeÃ§as Individuais</h2>
            </div>
            <div class="empty-state">
                <p>ğŸš§ MÃ³dulo em desenvolvimento</p>
                <p style="margin-top:8px; font-size:12px; color:var(--text-3);">Cadastro individual por brinco, ficha e
                    histÃ³rico â€” em breve!</p>
            </div>
        </section>

    </main>

    <!-- ===================== MODAL: TROCAR PASTO ===================== -->
    <div id="modal-trocar-pasto" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>ğŸ”„ Trocar Pasto</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-trocar-pasto')">âœ•</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-tp-lote"></span></p>
                <p><strong>Pasto Atual:</strong> <span id="modal-tp-atual"></span></p>
                <div class="form-group">
                    <label>Novo Pasto</label>
                    <select id="modal-tp-novo-pasto">
                        <option value="">Selecionar...</option>
                    </select>
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarTrocaPasto()">âœ… Confirmar Troca</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: JUNTAR LOTES ===================== -->
    <div id="modal-juntar-lotes" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>ğŸ”— Juntar Lotes</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-juntar-lotes')">âœ•</button>
            </div>
            <div class="agro-modal-body">
                <p style="font-size:13px; color:#666; margin-bottom:12px;">Selecione 2 ou mais lotes para unir. Os
                    animais serÃ£o somados e o peso serÃ¡ a mÃ©dia ponderada.</p>
                <div id="modal-jl-lista" class="checkbox-list"></div>
                <div class="form-group" style="margin-top:12px;">
                    <label>Nome do Novo Lote</label>
                    <input type="text" id="modal-jl-novo-nome" placeholder="Ex: Lote Unificado 2026">
                </div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarJuntarLotes()">âœ… Juntar Lotes</button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL: ABASTECER COCHO ===================== -->
    <div id="modal-abastecer" class="agro-modal">
        <div class="agro-modal-content">
            <div class="agro-modal-header">
                <h3>ğŸ§‚ Abastecer Cocho</h3>
                <button class="modal-close" onclick="window.lotes.fecharModal('modal-abastecer')">âœ•</button>
            </div>
            <div class="agro-modal-body">
                <p><strong>Lote:</strong> <span id="modal-ab-lote"></span></p>
                <p><strong>Produto:</strong> <span id="modal-ab-tipo"></span></p>
                <input type="hidden" id="modal-ab-produto" value="">
                <p id="modal-ab-consumo-info" style="font-size:12px; color:#666; margin-bottom:10px;"></p>
                <div class="form-row">
                    <div class="form-group">
                        <label>Quantidade de Sacos</label>
                        <input type="number" id="modal-ab-sacos" placeholder="4"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                    <div class="form-group">
                        <label>Kg por Saco</label>
                        <input type="number" id="modal-ab-kg-saco" value="25" step="0.5"
                            oninput="window.lotes.calcPrevisaoAbastecimento()">
                    </div>
                </div>
                <div id="modal-ab-previsao" class="previsao-box"></div>
            </div>
            <div class="agro-modal-footer">
                <button class="submit-btn" onclick="window.lotes.confirmarAbastecimento()">âœ… Registrar
                    Abastecimento</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation Bar â€” 5 Abas Organizadas -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="window.app.navigate('home')" id="nav-home">
            <span class="nav-icon">ğŸ </span>
            Home
        </button>
        <button class="nav-item" onclick="window.app.navigate('rebanho-hub')" id="nav-rebanho">
            <span class="nav-icon">ğŸ„</span>
            Rebanho
        </button>
        <button class="nav-item" onclick="window.app.navigate('financeiro-hub')" id="nav-financeiro">
            <span class="nav-icon">ğŸ’°</span>
            Financeiro
        </button>
        <button class="nav-item" onclick="window.app.navigate('operacoes-hub')" id="nav-operacoes">
            <span class="nav-icon">ğŸ“¦</span>
            OperaÃ§Ãµes
        </button>
        <button class="nav-item" onclick="window.app.navigate('config')" id="nav-config">
            <span class="nav-icon">âš™ï¸</span>
            Config
        </button>
    </nav>

    <!-- Scripts -->
    <script src="js/data.js?v=20260211r"></script>
    <script src="js/rebanho.js?v=20260211r"></script>
    <script src="js/pastos.js?v=20260211r"></script>
    <script src="js/lotes.js?v=20260211r"></script>
    <script src="js/obras.js?v=20260211r"></script>
    <script src="js/manejo.js?v=20260211r"></script>
    <script src="js/financeiro.js?v=20260211r"></script>
    <script src="js/estoque.js?v=20260211r"></script>
    <script src="js/funcionarios.js?v=20260211r"></script>
    <script src="js/rebanho-ops.js?v=20260211s"></script>
    <script src="js/pasto-mgmt.js?v=20260211s"></script>
    <script src="js/calendario.js?v=20260211s"></script>
    <script src="js/contas.js?v=20260211s"></script>
    <script src="js/indicadores.js?v=20260211s"></script>
    <script src="app.js?v=20260211s"></script>

    <!-- Theme & Greeting Init -->
    <script>
        (function () {
            var h = new Date().getHours();

            // Light mode only â€” no dark mode

            // Greeting
            var greetEl = document.getElementById('greeting-text');
            var dateEl = document.getElementById('greeting-date');
            if (greetEl) {
                if (h < 6) greetEl.textContent = 'ğŸŒ™ Boa madrugada';
                else if (h < 12) greetEl.textContent = 'â˜€ï¸ Bom dia';
                else if (h < 18) greetEl.textContent = 'ğŸ¤  Boa tarde';
                else greetEl.textContent = 'ğŸŒ™ Boa noite';
            }
            if (dateEl) {
                var days = ['Domingo', 'Segunda', 'TerÃ§a', 'Quarta', 'Quinta', 'Sexta', 'SÃ¡bado'];
                var months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
                var now = new Date();
                dateEl.textContent = days[now.getDay()] + ', ' + now.getDate() + ' de ' + months[now.getMonth()] + ' de ' + now.getFullYear();
            }
        })();
    </script>
</body>

</html>